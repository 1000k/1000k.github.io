<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Php on 1000g</title>
    <link>http://1000k.github.io/categories/php/</link>
    <description>Recent content in Php on 1000g</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <lastBuildDate>Tue, 27 Jan 2015 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://1000k.github.io/categories/php/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Sublime Text 2 ã§ CakePHP2 ã® CodeSniffer ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã™ã‚‹</title>
      <link>http://1000k.github.io/2015/01/27/validate-cakephp2-rules-with-sublime-text2-phpcs-plugin/</link>
      <pubDate>Tue, 27 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2015/01/27/validate-cakephp2-rules-with-sublime-text2-phpcs-plugin/</guid>
      <description>

&lt;p&gt;Sublime Text 2 ã®ã‚¨ãƒ‡ã‚£ã‚¿ä¸Šã§ PHP CodeSniffer ã‚’ä½¿ã„ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ–¹æ³•ã§ã™ã€‚&lt;a href=&#34;http://benmatselby.github.io/sublime-phpcs/&#34;&gt;sublime-phpcs&lt;/a&gt; ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„é•åã®ã‚ã‚‹è¡ŒãŒã‚¨ãƒ‡ã‚£ã‚¿ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãªãŠã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å…¬å¼ãƒšãƒ¼ã‚¸ã§ã¯ phpmd ã‚‚ä¸€ç·’ã«å°å…¥ã—ã¦ã„ã¾ã™ãŒã€&lt;a href=&#34;http://blog.1000k.net/2013/11/26/phpmd-%e3%81%ae%e9%a0%ad%e3%81%8c%e3%81%8b%e3%81%aa%e3%82%8a-messy/&#34;&gt;PHPMD ã¯ãƒ’ã‚¹ãƒ†ãƒªãƒƒã‚¯ã™ãã¦å€‹äººçš„ã«ãŠå‹§ã‚ã—ãªã„&lt;/a&gt; ã®ã§çœç•¥ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«&lt;/h2&gt;

&lt;h3 id=&#34;codesniffer-ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;CodeSniffer ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;pear install PHP_CodeSniffer
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;cakephp-ã®ãƒ«ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;CakePHP ã®ãƒ«ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;pear channel-discover pear.cakephp.org
pear install cakephp/CakePHP_CodeSniffer
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;CodeSniffer ã®ãƒ«ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ phpcs -i
The installed coding standards are CakePHP, MySource, PEAR, PHPCS, PSR1, PSR2, Squiz and Zend
(CakePHP ãŒå«ã¾ã‚Œã¦ã„ã‚Œã° OK)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;sublime-text-2-ã«-codesniffer-ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;Sublime Text 2 ã« CodeSniffer ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹&lt;/h3&gt;

&lt;p&gt;&amp;ldquo;Package Control: Install Package&amp;rdquo; ã§ &lt;code&gt;Phpcs&lt;/code&gt; ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã ã‘ã€‚&lt;/p&gt;

&lt;p&gt;(Package Control è‡ªä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯ &lt;a href=&#34;https://sublime.wbond.net/installation#st2&#34;&gt;Installation - Package Control&lt;/a&gt; ã‚’å‚ç…§)&lt;/p&gt;

&lt;h3 id=&#34;sublime-text-ã®è¨­å®š:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;Sublime Text ã®è¨­å®š&lt;/h3&gt;

&lt;p&gt;&amp;ldquo;Preferences &amp;gt; Package Settings &amp;gt; PHP Code Sniffer &amp;gt; Settings - User&amp;rdquo; ã‚’é–‹ãã€ä»¥ä¸‹ã®ã‚­ãƒ¼ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;phpcs_php_path&lt;/li&gt;
&lt;li&gt;phpcs_executable_path&lt;/li&gt;
&lt;li&gt;php_cs_fixer_executable_path&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¨˜å…¥ä¾‹:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;phpcs_php_path&amp;quot;: &amp;quot;C:\xampp\php\phpcs&amp;quot;,
    &amp;quot;phpcs_executable_path&amp;quot;: &amp;quot;C:\xampp\php\phpcs.bat&amp;quot;,
    &amp;quot;phpcs_additional_args&amp;quot;: {
        &amp;quot;--standard&amp;quot;: &amp;quot;CakePHP&amp;quot;
    },
    &amp;quot;php_cs_fixer_executable_path&amp;quot;: &amp;quot;C:Users{ãƒ¦ãƒ¼ã‚¶ãƒ¼å}AppDataRoamingComposervendorbin&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;windows-ã®ã¿-phpcs-py-ã‚’ä¿®æ­£ã™ã‚‹:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;(Windows ã®ã¿) phpcs.py ã‚’ä¿®æ­£ã™ã‚‹&lt;/h3&gt;

&lt;p&gt;Windows ã§ã¯ã€ã“ã®ã¾ã¾ phpcs ãŒå®Ÿè¡Œã—ã¦ã‚‚ä½•ã‚‚çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;(&lt;code&gt;Ctrl + @&lt;/code&gt; ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ãã¨ &lt;code&gt;[Windows Error]&lt;/code&gt; ã¨å‡ºã¦é€”ä¸­ã§æ­¢ã¾ã£ã¦ã„ã‚‹)&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®æ‰‹é †ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&amp;ldquo;Preferences &amp;gt; Browse Packagesâ€¦&amp;rdquo; ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é–‹ãã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;Phpcs &amp;gt; phpcs.py&amp;rdquo; ã‚’é–‹ãã€‚&lt;/li&gt;
&lt;li&gt;169è¡Œç›®ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ (ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã« &lt;code&gt;shell=True&lt;/code&gt; ã‚’è¿½åŠ ) ã™ã‚‹ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;# proc = subprocess.Popen(cmd, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT, startupinfo=info, cwd=home)
proc = subprocess.Popen(cmd, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT, startupinfo=info, cwd=home, shell=True)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹&lt;/h3&gt;

&lt;p&gt;PHP ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸã‚¿ãƒ–ã§ &lt;code&gt;Ctrl + P &amp;gt; PHP Code Sniffer: Sniff This File&lt;/code&gt; ã¨ã‚¿ã‚¤ãƒ—ã™ã‚Œã°ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„é•åã‚’æ¤œçŸ¥ã—ã¦ãã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«é•åã§ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆã«ãƒ‡ã‚£ã‚¹ã‚‰ã‚Œã‚‹ãƒªã‚¹ã‚¯ã‚’å›é¿ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã‚ªãƒ—ã‚·ãƒ§ãƒ³:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³&lt;/h2&gt;

&lt;h3 id=&#34;ä¿å­˜æ™‚ã«-sniff-ã•ã‚Œã‚‹ã®ã‚’æ­¢ã‚ã‚‹:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;ä¿å­˜æ™‚ã« Sniff ã•ã‚Œã‚‹ã®ã‚’æ­¢ã‚ã‚‹&lt;/h3&gt;

&lt;p&gt;ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã€ä¿å­˜ã™ã‚‹ãŸã³ã«è¦ç´„é•åãŒã‚µã‚¸ã‚§ã‚¹ãƒˆã•ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;é¬±é™¶ã—ã„å ´åˆã¯ &amp;ldquo;Preferences &amp;gt; Package Settings &amp;gt; PHP Code Sniffer &amp;gt; Settings - User&amp;rdquo; ã«ä¸‹è¨˜ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã‚ªãƒ•ã«ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;phpcs_execute_on_save&amp;quot;: false
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;å‚è€ƒ:0e3f1a6b553d4169127746e6faedbbcf&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://benmatselby.github.io/sublime-phpcs/&#34;&gt;sublime-phpcs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/10585274/custom-ruleset-for-phpcs-using-phpstorm&#34;&gt;php - Custom ruleset for phpcs using PHPStorm - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/cakephp/cakephp-codesniffer&#34;&gt;cakephp/cakephp-codesniffer Â· GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/fabpot/PHP-CS-Fixer&#34;&gt;fabpot/PHP-CS-Fixer Â· GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://matsu-chara.hatenablog.com/entry/2013/12/27/125026&#34;&gt;sublime-phpcsã§PSR-2æº–æ‹ ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° - ã ã„ãŸã„ã‚ˆãã‚ã‹ã‚‰ãªã„ãƒ–ãƒ­ã‚°( Â´_ã‚`)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>CakePHP ã§ beforeFilter() ä»¥é™ã®å‡¦ç†ã‚’å®Ÿè¡Œã—ãªã„ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•</title>
      <link>http://1000k.github.io/2013/12/09/skip-procedures-after-beforefilter-in-cakephp/</link>
      <pubDate>Mon, 09 Dec 2013 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2013/12/09/skip-procedures-after-beforefilter-in-cakephp/</guid>
      <description>

&lt;p&gt;ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã«ã¯ã€ã©ã“ã®ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã¦ã‚‚ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç”¨ç”»é¢ã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã° CakePHP ã§ API ã‚’ä½œã£ãŸãªã‚‰ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ™‚ã«ã¯ã©ã®ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;result&amp;quot;: &amp;quot;NG&amp;quot;,
    &amp;quot;message&amp;quot;: &amp;quot;This service is now under maintenance.&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã‚’è€ƒãˆã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãªãŠã€CakePHP 2.4.2 ã§å‹•ä½œç¢ºèªæ¸ˆã¿ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã‚„ã‚ŠãŸã„ã“ã¨:882e9f5bab62127de673717c90df9029&#34;&gt;ã‚„ã‚ŠãŸã„ã“ã¨&lt;/h2&gt;

&lt;p&gt;ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ãŒ ON ã®æ™‚ã¯ã€ã©ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å©ã‹ã‚Œã¦ã‚‚ JSON ã§ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã‚ˆã†ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã‚³ãƒ¼ãƒ‰:882e9f5bab62127de673717c90df9029&#34;&gt;ã‚³ãƒ¼ãƒ‰&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;App::uses(&#39;Controller&#39;, &#39;Controller&#39;);

class AppController extends Controller {
/**
 * beforeFilter
 * ã‚µãƒ¼ãƒ“ã‚¹ãŒãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ãªã‚‰ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç”»é¢ã‚’æç”»ã™ã‚‹ã€‚
 */
    public function beforeFilter() {
        if ($this-&amp;gt;isUnderMaintenance()) {
            $this-&amp;gt;set(&#39;output&#39;, [
                &#39;result&#39; =&amp;gt; &#39;NG&#39;,
                &#39;message&#39; =&amp;gt; &#39;This service is now under maintenance.&#39;
            ]);
        }
    }

/**
 * beforeRender
 * ini/jsonå½¢å¼ã®å‡ºã—åˆ†ã‘ã‚’ã™ã‚‹ã€‚
 */
    public function beforeRender() {
        $this-&amp;gt;viewClass = &#39;Json&#39;;
        $this-&amp;gt;set(&#39;_serialize&#39;, &#39;output&#39;);
    }

/**
 * ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰æ™‚ã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
 *
 * @param CakeRequest $request
 */
    public function invokeAction(CakeRequest $request) {
        if ($this-&amp;gt;isUnderMaintenance()) {
            return false;
        }

        return parent::invokeAction($request);
    }

/**
 * ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã€‚
 *
 * @return boolean ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ãªã‚‰ true
 */
    public function isUnderMaintenance() {
        return file_exists(&#39;/tmp/maintenanceFile&#39;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ãƒã‚¤ãƒ³ãƒˆ:882e9f5bab62127de673717c90df9029&#34;&gt;ãƒã‚¤ãƒ³ãƒˆ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AppController::beforeFilter()&lt;/code&gt; ã«å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€å…¨ã¦ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«å½±éŸ¿ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;invokeAction()&lt;/code&gt; ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¦ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰æ™‚ã«ã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã•ã›ãªã„ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚ŒãŒç„¡ã„ã¨ã€ç”»é¢ã«ã¯ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç”¨ã®è¡¨ç¤ºãŒã•ã‚Œã¦ã„ã¦ã‚‚ã€è£å´ã§ã¯çµå±€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ä½™è«‡:882e9f5bab62127de673717c90df9029&#34;&gt;ä½™è«‡&lt;/h2&gt;

&lt;p&gt;æœ¬å½“ã¯ CakePHP 2.1 ã‹ã‚‰æ¡ç”¨ã•ã‚ŒãŸ &lt;a href=&#34;http://book.cakephp.org/2.0/en/core-libraries/events.html&#34;&gt;Events System&lt;/a&gt; ã‚’ä½¿ã£ã¦ &lt;code&gt;beforeFilter()&lt;/code&gt; ä»¥é™ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã•ã‚Œãªã„ã‚ˆã†ã«ã—ãŸã‹ã£ãŸã®ã§ã™ãŒã€ã‚„ã‚Šæ–¹ãŒã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ detach ã™ã‚‹æ–¹æ³•ã‚’ã”å­˜çŸ¥ã®æ–¹ãŒã„ãŸã‚‰æ•™ãˆã¦ä¸‹ã•ã„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ:882e9f5bab62127de673717c90df9029&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://book.cakephp.org/2.0/en/views/json-and-xml-views.html&#34;&gt;JSON and XML views â€” CakePHP Cookbook v2.x documentation&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã‚ãš JSON ã§å‡ºåŠ›ã‚’è¡Œã†æ–¹æ³•ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://book.cakephp.org/2.0/en/controllers.html#request-life-cycle-callbacks&#34;&gt;Controllers â€” CakePHP Cookbook v2.x documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[ invokeAction&amp;rsquo;]);&amp;rdquo; &amp;gt;CakeAPI &amp;gt; invokeAction](&lt;a href=&#34;http://api.cakephp.org/2.4/class-Controller.html#_invokeAction&#34;&gt;http://api.cakephp.org/2.4/class-Controller.html#_invokeAction&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>PHPMD ã®é ­ãŒã‹ãªã‚Š messy</title>
      <link>http://1000k.github.io/2013/11/26/phpmd-is-messy/</link>
      <pubDate>Tue, 26 Nov 2013 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2013/11/26/phpmd-is-messy/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;http://phpmd.org/&#34;&gt;PHPMD (PHP Mess Detector)&lt;/a&gt; ã¯ã€PHP ã®ã‚³ãƒ¼ãƒ‰ã‚’é™çš„è§£æã—ã¦ã€æ½œåœ¨çš„ãªãƒã‚°ã‚„ç„¡æ„å‘³ãªãƒ–ãƒ­ãƒƒã‚¯ã‚’ç™ºè¦‹ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãŒã€ã—ã°ã—ã°å•é¡Œãªã„ãƒ–ãƒ­ãƒƒã‚¯ã«ã‚‚ã‚±ãƒã‚’ã¤ã‘ã¦ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãŸã¨ãˆã°ã“ã‚“ãªã‚³ãƒ¼ãƒ‰ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public function setUp() {
    // è­¦å‘Š: Avoid using static access to class &#39;parent&#39; in method &#39;setUp&#39;.
    parent::setUp();

    $this-&amp;gt;Account = ClassRegistry::init(&#39;Account&#39;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¦ªã‚¯ãƒ©ã‚¹ã® setUp() ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã‚“ã ã‘ã§ã€ã€Œé™çš„ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãªã€ã¨æ€’ã‚‰ã‚Œã¾ã™ã€‚ã˜ã‚ƒã‚ã©ã†ã‚„ã£ã¦ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚Œã°ã„ã„ã‚“ã ã‚ˆã€ã¨æ€ã„ã¾ã™ã€‚ãƒ¡ãƒ³ãƒå®šæ•°ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ &lt;code&gt;self::&lt;/code&gt; ã‚’ä½¿ã£ã¦ã‚‚å‡ºã¾ã™ã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚’å¦å®šã—ã¦ã‚“ã®ã‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;@SuppressWarnings&lt;/code&gt; ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒ©ã‚¹ã® PHPDoc ã«æ›¸ãã“ã¨ã§ã“ã®è­¦å‘Šã¯å‡ºãªããªã‚Šã¾ã™ãŒã€æœ¬å½“ã«é–“é•ã£ãŸé™çš„ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¡Œã£ã¦ã„ã¦ã‚‚ç„¡è¦–ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚å›°ã£ãŸã‚‚ã‚“ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã»ã‹ã«ã‚‚ã€if-else ã‚’ä½¿ã†ã¨ä¸‹ã®ã‚ˆã†ãªè­¦å‘Šã‚’å‡ºã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public function step() {
    if ($this-&amp;gt;find(&#39;count&#39;) &amp;lt; 1) {
        $this-&amp;gt;foo();
    } else {
        // è­¦å‘Š: The method step uses an else expression. Else is never necessary and you can simplify the code to work without else.
        $this-&amp;gt;bar();
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã€Œelse ãªã‚“ã¦å¿…è¦ã­ãˆã‚ˆã€‚else ã®å¿…è¦ãªã„æ›¸ãæ–¹ã—ã‚ã‚ˆã€‚ã€ã¨è¨€ã£ã¦ãã¾ã™ã€‚è¨€ã„ãŸã„ã“ã¨ã¯ã‚ã‹ã‚Šã¾ã™ãŒã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ãŸçµæœæœ€ã‚‚ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒé«˜ããªã‚‹ãªã‚‰ã€if-else æ§‹æ–‡ã‚’ä½¿ã£ã¦ã‚‚å…¨ç„¶å•é¡Œãªã„ã¯ãšã§ã™ã€‚else ã‚’ä½¿ã†ã ã‘ã§è­¦å‘Šãƒ¬ãƒ™ãƒ« High ã§ç³¾å¼¾ã™ã‚‹ã®ã¯ã„ã‹ãŒãªã‚‚ã®ã§ã—ã‚‡ã†ã‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚:fa9ca428d896ab32fcf9e86dc6eea620&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;PHPMD ã¯ãƒ’ã‚¹ãƒ†ãƒªãƒ¼æ°—å‘³ãªã®ã§ã€ãƒ¬ãƒãƒ¼ãƒˆçµæœã‚’ã‚ã¾ã‚Šæ·±åˆ»ã«å—ã‘å–ã‚‰ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ:fa9ca428d896ab32fcf9e86dc6eea620&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://phpmd.org/&#34;&gt;PHPMD - PHP Mess Detector&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/18604179/phpmd-avoid-static-access-to-parent&#34;&gt;php - PHPMD avoid static access to parent - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>PHPUnit ã® Expectation ã‚’ç°¡æ½”ã«æ›¸ã TIPS</title>
      <link>http://1000k.github.io/2013/09/24/tips-to-simplify-writing-expection-of-phpunit/</link>
      <pubDate>Tue, 24 Sep 2013 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2013/09/24/tips-to-simplify-writing-expection-of-phpunit/</guid>
      <description>

&lt;p&gt;PHPUnit ã®å°ãƒã‚¿ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;PHPUnit ã§ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æ›¸ãã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°é‡ãŒå¤šããªã£ã¦ã†ã‚“ã–ã‚Šã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;?php
class FooClassTest extends PHPUnit_Framework_TestCase {
    /**
     * @covers FooClass::doSomething
     */
    public function testDoSomething() {
        // FooClass ãŒä¾å­˜ã—ã¦ã„ã‚‹ BarClass ã®ãƒ¢ãƒƒã‚¯ã‚’ä½œã‚‹ã€‚
        // ä½•ã‚‚ã—ãªã„ã‚ˆã†ã«ã€__construct() ã¨ __clone() ã¯ç„¡åŠ¹åŒ–ã—ã¦ãŠãã€‚
        $mockBar = $this-&amp;gt;getMockBuilder(&#39;BarClass&#39;)
            -&amp;gt;disableOriginalConstructor()
            -&amp;gt;disableOriginalClone()
            -&amp;gt;getMock();

        // BarClass::barMethod ã®ãƒ¢ãƒƒã‚¯ã®æŒ™å‹•ã‚’å¤‰ãˆã‚‹ã€‚
        $mockBar-&amp;gt;expect($this-&amp;gt;any())
            -&amp;gt;method(&#39;barMethod&#39;)
            -&amp;gt;will($this-&amp;gt;returnValue(true));

        $object = new FooClass($mockBar);

        $this-&amp;gt;assertTrue($object-&amp;gt;doSomething());
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é•·ã„ã€æ›¸ãã¥ã‚‰ã„ã€èª­ã¿ã¥ã‚‰ã„ã€‚ã“ã‚“ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã€2ã¤ä»¥ä¸Šæ›¸ããŸããªã„ã§ã™ã­ã€‚ã‚‚ã£ã¨æ¥½ã«æ›¸ããŸã‚ã® TIPS ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã€ä½•ã‚‚ã—ãªã„ã€Œãƒ—ãƒ¬ãƒ¼ãƒ³ãªã€ãƒ¢ãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚&lt;code&gt;PHPUnit_Framework_TestCase&lt;/code&gt; ã‚’ç¶™æ‰¿ã—ãŸ &lt;code&gt;MyTestCase&lt;/code&gt; ã«å®Ÿè£…ã—ã¦ã‚„ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class MyTestCase extends PHPUnit_Framework_TestCase {

    /**
     * å…ƒã®ã‚¯ãƒ©ã‚¹ãŒå®Œå…¨ã«ä½•ã‚‚ã—ãªã„ã‚ˆã†æ“¬è£…ã—ãŸãƒ¢ãƒƒã‚¯ã‚’ä½œæˆã™ã‚‹ã€‚
     *
     * - ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒç„¡åŠ¹
     * - ã‚¯ãƒ­ãƒ¼ãƒ³ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒç„¡åŠ¹
     *
     * @param string $class_name
     * @return mixed æŒ‡å®šã—ãŸã‚¯ãƒ©ã‚¹ã®ãƒ¢ãƒƒã‚¯
     * @throws InvalidArgumentException æŒ‡å®šã—ãŸã‚¯ãƒ©ã‚¹åãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ
     */
    protected function _getPlainMock($class_name) {
        if (!class_exists($class_name)) {
            throw new InvalidArgumentException(&amp;quot;{$class_name} does not exist.&amp;quot;);
        }

        return $this-&amp;gt;getMockBuilder($class_name)
            -&amp;gt;disableOriginalConstructor()
            -&amp;gt;disableOriginalClone()
            -&amp;gt;getMock();
    }

}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¾ãŸã€PHPUnit ã® Expectation ã¯ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã§é€£ç¶šã—ã¦æŒ‡å®šã§ãã¾ã™ (&amp;ldquo;-&amp;gt;&amp;rdquo; æ¼”ç®—å­ã§ç¹‹ã’ã¦æ›¸ã‘ã‚‹) ãŒã€ãã‚‚ãã‚‚è¨˜è¿°é‡ãŒå¤šã„ã§ã™ã€‚ã„ã¡ã„ã¡ this this æ›¸ãã®ã‚‚ç…©ã‚ã—ã„ã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã§ã€Expectation ã‚’ã‚»ãƒƒãƒˆã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œã£ã¦ã‚„ã‚‹ã¨æ¥½ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;?php
    /**
     * ãƒ¢ãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã« Expectation ã‚’è¨­å®šã™ã‚‹ã€‚
     *
     * @param Object &amp;amp;$mock ãƒ¢ãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
     * @param string $matcher ãƒãƒƒãƒãƒ£ãƒ¼ ([any|once|never|...])
     * @param string $method ãƒ¡ã‚½ãƒƒãƒ‰å
     * @param mixed $return_value æœŸå¾…ã™ã‚‹æˆ»ã‚Šå€¤
     */
    protected function _setExpectation(&amp;amp;$mock, $matcher, $method, $return_value = null) {
        $mock-&amp;gt;expects($this-&amp;gt;$matcher())
            -&amp;gt;method($method)
            -&amp;gt;will($this-&amp;gt;returnValue($return_value));
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚’ä½¿ã†ã¨ã€ä¸€ç•ªæœ€åˆã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãç›´ã›ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;require_once &#39;MyTestCase.php&#39;;

class FooClassTest extends MyTestCase {
    /**
     * @covers FooClass::doSomething
     * @test
     */
    function doSomething() {
        $mockBar = $this-&amp;gt;_getPlainMock(&#39;BarClass&#39;)
        $this-&amp;gt;_setExpectation($mockBar, &#39;any&#39;, &#39;barMethod&#39;, true);

        $object = new FooClass($mockBar);

        $this-&amp;gt;assertTrue($object-&amp;gt;doSomething());
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°¡å˜ã«ãªã‚Šã¾ã—ãŸã­ï¼9è¡Œã‚‚ã‚ã£ãŸã‚³ãƒ¼ãƒ‰ãŒ4è¡Œã«æ¸›ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã¡ãªã¿ã«ã€ã•ã‚Šæ°—ãªããƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã® &lt;code&gt;public&lt;/code&gt; ã¯å‰Šé™¤ã—ã¦ã„ã¾ã™ã€‚PHP ã®ä»•æ§˜ä¸Šã€public ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚ã–ã‚ã–ãã‚Œã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€PHPDoc éƒ¨åˆ†ã« &lt;code&gt;@test&lt;/code&gt; ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨ã€ãƒ¡ã‚½ãƒƒãƒ‰åã‚’ &lt;code&gt;test&lt;/code&gt; ã§å§‹ã‚ãªãã¦ã‚‚ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¨ã—ã¦èªè­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ç§ã¯ã“ã®æ–¹ãŒèª­ã¿ã‚„ã™ã„ã®ã§ã€æœ€è¿‘ã¯ã“ã†æ›¸ãã“ã¨ãŒå¤šã„ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã†ã„ã†æ”¹å–„ã‚’ã—ã¦ã‚‚ã€Ruby ã«æ…£ã‚Œã¦ã„ã‚‹ã¨ã¾ã é•·ãæ„Ÿã˜ã¾ã™ã€‚ã€Œ$ã€ã€Œ&amp;rsquo;ã€ã€Œ&amp;gt;ã€ãªã©ã®è¨˜å·ã‚’æ‰“ã¤ã®ã‚‚ç…©ã‚ã—ã„ã§ã™ã€‚Ruby ä½¿ã„ã¦ãˆãªã‚ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ:66eb9e16e3cbfb7a24c972ec7c7d6f12&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;[ ç¬¬10ç«  ãƒ†ã‚¹ãƒˆãƒ€ãƒ–ãƒ«&amp;rsquo;]);&amp;rdquo; &amp;gt;PHPUnit å…¬å¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ« &amp;gt; ç¬¬10ç«  ãƒ†ã‚¹ãƒˆãƒ€ãƒ–ãƒ«](&lt;a href=&#34;http://phpunit.de/manual/3.8/ja/test-doubles.html&#34;&gt;http://phpunit.de/manual/3.8/ja/test-doubles.html&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://phpunit.de/manual/3.8/ja/appendixes.annotations.html&#34;&gt;ä»˜éŒ²B ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>jenkins ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ ant ã‚’å®Ÿè¡Œã§ããªã„ã¨ãã®å¯¾å‡¦æ³•</title>
      <link>http://1000k.github.io/2013/07/02/jenkins-user-cannot-run-ant/</link>
      <pubDate>Tue, 02 Jul 2013 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2013/07/02/jenkins-user-cannot-run-ant/</guid>
      <description>

&lt;p&gt;CentOS 6.3 ã«ã¦ã€&lt;a href=&#34;http://jenkins-php.org/&#34;&gt;Template for Jenkins Jobs for PHP Projects&lt;/a&gt; ã«ã‚ã‚‹ ant ã‚¿ã‚¹ã‚¯ (build.xml) é€šã‚Šã« PHPUnit ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã—ã‚ˆã†ã¨ã—ãŸã‚‰ã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‹ãªã‚Šé•·æ™‚é–“ãƒãƒã£ãŸã®ã§ãƒ¡ãƒ¢ã‚’æ®‹ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç—‡çŠ¶:135291858de89f6329950b22fca515d3&#34;&gt;ç—‡çŠ¶&lt;/h2&gt;

&lt;p&gt;CentOS 6.3 ã«ã¦ã€&lt;a href=&#34;http://jenkins-php.org/&#34;&gt;Template for Jenkins Jobs for PHP Projects&lt;/a&gt; ã«ã‚ã‚‹ä»¥ä¸‹ã®ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚&lt;code&gt;
 &amp;lt;target name=&amp;quot;phpunit&amp;quot; description=&amp;quot;Run unit tests using PHPUnit and generates junit.xml and clover.xml&amp;quot;&amp;gt; &amp;lt;exec executable=&amp;quot;phpunit&amp;quot; failonerror=&amp;quot;true&amp;quot;/&amp;gt; &amp;lt;/target&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:&lt;code&gt;
 # sudo -u jenkins ant ... phpunit: BUILD FAILED /var/lib/jenkins/jobs/mojamoja-unit-testing/workspace/build.xml:22: Execute failed: java.io.IOException: Cannot run program &amp;quot;phpunit&amp;quot;: error=2, No such file or directory Total time: 0 seconds&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;åŸå› :135291858de89f6329950b22fca515d3&#34;&gt;åŸå› &lt;/h2&gt;

&lt;p&gt;ã©ã†ã‚„ã‚‰ phpunit ã¸ã®ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;phpunit ã®å®Ÿä½“ã¯ &lt;code&gt;/usr/local/bin/phpunit&lt;/code&gt; ãªã®ã§ã™ãŒã€jenkins ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã“ã® PATH ã‚’å‚ç…§ã§ãã¦ã„ãªã„æ¨¡æ§˜ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è©¦è¡ŒéŒ¯èª¤:135291858de89f6329950b22fca515d3&#34;&gt;è©¦è¡ŒéŒ¯èª¤&lt;/h2&gt;

&lt;p&gt;ã¾ãšã€jenkins ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® &lt;code&gt;~/.bash_profile&lt;/code&gt; ã¨ &lt;code&gt;~/.bashrc&lt;/code&gt; ã‚’ä»¥ä¸‹ã®å†…å®¹ã§ä½œæˆã—ã¦ã‚‚ãƒ€ãƒ¡ã§ã—ãŸã€‚PATH ã¯åæ˜ ã•ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
export PATH=$PATH:/usr/local/bin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¾ãŸã€ä¸‹è¨˜ã®ã‚ˆã†ã« ant ã‚¿ã‚¹ã‚¯å†…ã§ PATH ã‚’å¤‰æ›´ã™ã‚‹ã‚·ã‚§ãƒ«ã‚’èµ°ã‚‰ã›ã¦ã‚‚ãƒ€ãƒ¡ã§ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;target name=&amp;quot;setenv&amp;quot;&amp;gt;
   &amp;lt;exec executable=&amp;quot;/bin/sh&amp;quot;&amp;gt;
     &amp;lt;arg line=&amp;quot;./setenv.sh&amp;quot;/&amp;gt;
   &amp;lt;/exec&amp;gt;
 &amp;lt;/target&amp;gt;

 &amp;lt;target name=&amp;quot;env&amp;quot;&amp;gt;&amp;lt;exec executable=&amp;quot;env&amp;quot; /&amp;gt;&amp;lt;/target&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;setenv.sh ã®ä¸­èº«ã¯ä¸‹è¨˜ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/bin/sh
export PATH=${PATH}:/usr/local/bin
echo $PATH
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§ ant ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€&lt;code&gt;setenv&lt;/code&gt; ã‚¿ã‚¹ã‚¯ã®æ™‚ç‚¹ã§ã¯ PATH ã¯å¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ãŒã€æ¬¡ã«å®Ÿè¡Œã•ã‚Œã‚‹ &lt;code&gt;env&lt;/code&gt; ã‚¿ã‚¹ã‚¯ã§å…ƒã«æˆ»ã£ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚ã¾ã‚‹ã§ setenv ã¨ env ãŒåˆ¥ã€…ã®ãƒ—ãƒ­ã‚»ã‚¹ã§å‹•ã„ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Buildfile: build.xml

setenv:
     [exec] /sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin

env:
     [exec] HOSTNAME=mojamoja
     [exec] SHELL=/bin/bash
     [exec] TERM=xterm
     [exec] HISTSIZE=1000
     [exec] USER=jenkins
     ...
     [exec] PATH=/sbin:/bin:/usr/sbin:/usr/bin      &amp;lt;- /usr/local/bin ãŒè¿½åŠ ã•ã‚Œã¦ã„ãªã„
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¨ã†ã„ã‚ã‘ã§ã€setenv ã§ç’°å¢ƒå¤‰æ•°ã‚’ã‚»ãƒƒãƒˆã™ã‚‹æ–¹æ³•ã¯ãƒœãƒ„ã§ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;è§£æ±ºæ–¹æ³•:135291858de89f6329950b22fca515d3&#34;&gt;è§£æ±ºæ–¹æ³•&lt;/h2&gt;

&lt;h3 id=&#34;1-jenkins-ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹:135291858de89f6329950b22fca515d3&#34;&gt;1. Jenkins ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹&lt;/h3&gt;

&lt;p&gt;Jenkins ã‹ã‚‰ç’°å¢ƒå¤‰æ•°ã‚’ä¸Šæ›¸ãã™ã‚‹ã“ã¨ã§ã€PATH ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Jenkinsã®ç®¡ç† &amp;gt; ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®š &amp;gt; ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ &amp;gt; ç’°å¢ƒå¤‰æ•°&lt;/code&gt; ã«ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://blog.1000k.net/wp-content/uploads/jenkins_global_property.png&#34;&gt;
&lt;figure &gt;
    
        &lt;img src=&#34;http://1000k.github.io/img/jenkins_global_property-300x191.png&#34;  /&gt;
    
    
    &lt;figcaption&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;
&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ã‚­ãƒ¼: &lt;code&gt;PATH&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å€¤: &lt;code&gt;${PATH}:/usr/local/bin&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãŸã ã—ã€ã“ã®æ–¹æ³•ã ã¨ Jenkins ã‹ã‚‰ Ant ã‚’å®Ÿè¡Œã—ãŸæ™‚ã—ã‹ PATH ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;h3 id=&#34;2-sudoers-ã®-secure-path-ã‚’ç„¡åŠ¹ã«ã™ã‚‹:135291858de89f6329950b22fca515d3&#34;&gt;2. sudoers ã® secure_path ã‚’ç„¡åŠ¹ã«ã™ã‚‹&lt;/h3&gt;

&lt;p&gt;Fedora ç³»ã§ã¯ sudo ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã® PATH ãŒ &lt;code&gt;/sbin:/bin:/usr/sbin:/usr/bin&lt;/code&gt; ã®ã¿ã«åˆ¶é™ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’å¤–ã—ã¦ã‚„ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;visudo&lt;/code&gt; ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãç›´ã—ã¾ã™ã€‚&lt;code&gt;
 # secure\_path ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ # Defaults secure\_path = /sbin:/bin:/usr/sbin:/usr/bin # env\_keep ã« PATH ã‚’è¿½åŠ  Defaults env\_keep += &amp;quot;PATH&amp;quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§ secure_path ã®ç¸›ã‚ŠãŒè§£é™¤ã•ã‚Œã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;sudoers ã®ç’°å¢ƒå¤‰æ•°ã¯ `sudo -l` ã§ç¢ºèªã§ãã¾ã™ã€‚&lt;code&gt;
 # sudo -l Matching Defaults entries for root on this host: !visiblepw, always\_set\_home, env\_reset, env\_keep=&amp;quot;COLORS DISPLAY HOSTNAME HISTSIZE INPUTRC KDEDIR LS\_COLORS&amp;quot;, env\_keep+=&amp;quot;MAIL PS1 PS2 QTDIR USERNAME LANG LC\_ADDRESS LC\_CTYPE&amp;quot;, env\_keep+=&amp;quot;LC\_COLLATE LC\_IDENTIFICATION LC\_MEASUREMENT LC\_MESSAGES&amp;quot;, env\_keep+=&amp;quot;LC\_MONETARY LC\_NAME LC\_NUMERIC LC\_PAPER LC\_TELEPHONE&amp;quot;, env\_keep+=&amp;quot;LC\_TIME LC\_ALL LANGUAGE LINGUAS \_XKB\_CHARSET XAUTHORITY&amp;quot;, env_keep+=PATH User root may run the following commands on this host: (ALL) ALL&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ:135291858de89f6329950b22fca515d3&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://deginzabi163.wordpress.com/2011/04/23/%E8%A6%9A%E6%9B%B8fedora-14%E3%81%AEsudo%E3%81%8Cpath%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0%E3%82%92%E6%BD%B0%E3%81%99%E3%81%AE%E3%81%8C%E9%AC%B1%E9%99%B6%E3%81%97%E3%81%84%EF%BC%86%E5%AF%BE%E7%AD%96/&#34;&gt;[è¦šæ›¸]Fedora 14ã®sudoã§PATHãŒã‚¢ãƒ¬ã§é¬±é™¶ã—ã„ï¼†å¯¾ç­– | Deginzabi163&amp;rsquo;s Blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fishrimper.blogspot.jp/2012/12/sudo-path.html&#34;&gt;IT ã¨ã‹ãã®ä»–ã‚‚ã‚ã‚‚ã‚: sudo ã—ãŸæ™‚ã® PATH&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://superuser.com/questions/98686/passing-path-through-sudo&#34;&gt;linux - Passing PATH through sudo - Super User&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>ä»Šã•ã‚‰ PHP 5.2 ç’°å¢ƒã§ PHPUnit ã‚’å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹æ‰‹é †</title>
      <link>http://1000k.github.io/2013/06/25/how-to-run-phpunit-under-php-5-2-environment/</link>
      <pubDate>Tue, 25 Jun 2013 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2013/06/25/how-to-run-phpunit-under-php-5-2-environment/</guid>
      <description>

&lt;p&gt;æ¥­å‹™ã§ä½¿ã£ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªãŒ PHP 5.2 ã§ã—ã‹å‹•ã‹ãšã€ä»•æ–¹ãªã PHP 5.2 ã§ã‚‚å‹•ã PHPUnit 3.6.11 ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚([= 3.6.12 ã¯ PHP 5.3 ãŒå¿…è¦ã€‚&amp;rsquo;]);&amp;rdquo; title=&amp;ldquo;PHPUnitã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãŸã‚‰å‹•ä½œã—ãªããªã£ãŸ | 1000g&amp;rdquo;&amp;gt;PHPUnit &amp;gt;= 3.6.12 ã¯ PHP 5.3 ãŒå¿…è¦ã€‚](&lt;a href=&#34;http://blog.1000k.net/2012/10/19/phpunit%E3%82%92%E3%82%A2%E3%83%83%E3%83%97%E3%82%B0%E3%83%AC%E3%83%BC%E3%83%89%E3%81%97%E3%81%9F%E3%82%89%E5%8B%95%E4%BD%9C%E3%81%97%E3%81%AA%E3%81%8F%E3%81%AA%E3%81%A3%E3%81%9F/))&#34;&gt;http://blog.1000k.net/2012/10/19/phpunit%E3%82%92%E3%82%A2%E3%83%83%E3%83%97%E3%82%B0%E3%83%AC%E3%83%BC%E3%83%89%E3%81%97%E3%81%9F%E3%82%89%E5%8B%95%E4%BD%9C%E3%81%97%E3%81%AA%E3%81%8F%E3%81%AA%E3%81%A3%E3%81%9F/))&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æœ€è¿‘ã«ãªã£ã¦ã‚µãƒ¼ãƒãƒ¼ã®ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹ã®æ™‚æœŸã«ãªã‚Šã€æ–°ã—ã„ãƒ“ãƒ«ãƒ‰ãƒã‚·ãƒ³ã« PHPUnit ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ç¾½ç›®ã«ãªã£ãŸã®ã§ã™ãŒã€ã†ã¾ããƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒæƒã‚ãšè‹¦åŠ´ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä½œæ¥­ãƒ¡ãƒ¢ã‚’æ®‹ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãªãŠã€ã‚³ãƒãƒ³ãƒ‰ã¯å…¨ã¦ super user ã§å©ã„ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç’°å¢ƒ:a58652de0ea1df651ea37649dd28159c&#34;&gt;ç’°å¢ƒ&lt;/h2&gt;

&lt;p&gt;CentOS 6.3 63bit&lt;/p&gt;

&lt;h2 id=&#34;php-5-2-ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹:a58652de0ea1df651ea37649dd28159c&#34;&gt;PHP 5.2 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ãã‚‚ãã‚‚5.2ç³»ã¯ã¨ã£ãã« Deprecated ãªã®ã§ä½¿ã†ã¹ãã§ã¯ãªã„ã®ã§ã™ãŒã€æ¥­å‹™ã§ä½¿ã†ã‹ã‚‰ä»•æ–¹ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.php.net/releases/&#34;&gt;PHP: Releases&lt;/a&gt; ã‹ã‚‰ 5.2.17 ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# wget http://museum.php.net/php5/php-5.2.17.tar.gz
# tar -zxf php-5.2.17.tar.gz
# cd php-5.2.17
# ./configure #{å¥½ããª configure ã‚ªãƒ—ã‚·ãƒ§ãƒ³}
# make
# make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;configure ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ &lt;a href=&#34;http://www.php.net/manual/ja/configure.about.php&#34;&gt;PHP: ä¸­å¿ƒã¨ãªã‚‹ configure ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒªã‚¹ãƒˆ - Manual&lt;/a&gt; ã‚’å‚è€ƒã«ã€‚&lt;/p&gt;

&lt;h2 id=&#34;pear-ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹:a58652de0ea1df651ea37649dd28159c&#34;&gt;PEAR ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;PHP 5.2.17 ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¥ã£ã¦ã„ã‚‹ PEAR 1.9.1 ã§ã¯ã€å„ç¨®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ™‚ã«ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;warning: phpunit/PHPUnit requires PEAR Installer (version &amp;gt;= 1.9.4), installed version iphpunit/PHPUnit can optionally use package &amp;quot;phpunit/PHP_Invoker&amp;quot; (version &amp;gt;= 1.1.0)
warning: phpunit/File_Iterator requires PHP (version &amp;gt;= 5.3.3), installed version is 5.2warning: phpunit/File_Iterator requires PEAR Installer (version &amp;gt;= 1.9.4), installed ver1.9.1
warning: phpunit/Text_Template requires PHP (version &amp;gt;= 5.3.3), installed version is 5.2warning: phpunit/Text_Template requires PEAR Installer (version &amp;gt;= 1.9.4), installed ver1.9.1
warning: phpunit/PHP_CodeCoverage requires PHP (version &amp;gt;= 5.3.3), installed version is
warning: phpunit/PHP_CodeCoverage requires PEAR Installer (version &amp;gt;= 1.9.4), installed
is 1.9.1
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¾ãšã¯ PEAR ã‚’ 1.9.4 ä»¥ä¸Šã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# pear upgrade PEAR
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;phpunit-ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹:a58652de0ea1df651ea37649dd28159c&#34;&gt;PHPUnit ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ã“ã‚Œã§ PHPUnit ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å©ã„ã¦ãã ã•ã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# pear config-set auto_discover 1
# pear channel-add pear.phpunit.de
# pear install php.phpunit.de/PHPUnit-3.6.11
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»¥ä¸Šã§ PHPUnit ãŒå‹•ä½œå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# phpunit -v
PHPUnit 3.6.11 by Sebastian Bergmann.
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã¤ã„ã§ã«é–¢é€£ãƒ„ãƒ¼ãƒ«ã‚‚å…¥ã‚Œã‚‹:a58652de0ea1df651ea37649dd28159c&#34;&gt;ã¤ã„ã§ã«é–¢é€£ãƒ„ãƒ¼ãƒ«ã‚‚å…¥ã‚Œã‚‹&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://jenkins-php.org/&#34;&gt;Template for Jenkins Jobs for PHP Projects&lt;/a&gt; ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã¯ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# pear channel-add pear.pdepend.org
# pear channel-add pear.phpmd.org
# pear channel-add components.ez.no
# pear channel-add pear.symfony-project.com

# pear install pdepend/PHP_Depend
# pear install phpmd/PHP_PMD
# pear install phpunit/phpcpd
# pear install phpunit/phploc
# pear install PHPDocumentor
# pear install PHP_CodeSniffer
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æ„šç—´:a58652de0ea1df651ea37649dd28159c&#34;&gt;æ„šç—´&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/composer/composer&#34;&gt;Composer&lt;/a&gt; ã‚’ä½¿ãˆã‚Œã°åœ§å€’çš„ã«æ¥½ãªã®ã§ã™ãŒã€PHP &amp;gt;= 5.3.2 ã§ã—ã‹å‹•ã‹ãªã„ã®ã§è«¦ã‚ã¾ã—ãŸã€‚&lt;/li&gt;
&lt;li&gt;PEAR é…ã„ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªå‹•ãƒ†ã‚¹ãƒˆãŒã‚ã‚Œã° PHP ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§ãã‚‹ã‹æ¤œè¨¼ã§ãã‚‹ã®ã§ã™ãŒã€ã»ã¨ã‚“ã©ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒç„¡ã„ã®ã§ãã‚Œã‚‚ç„¡ç†ã€‚ã‚³ãƒ¼ãƒ‰ç·æ•°ã¯10ä¸‡è¡Œã€‚æ­»ã«ãŸã„ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã¡ã‚ƒã‚“ã¨è‡ªå‹•ãƒ†ã‚¹ãƒˆã¯ä½œã‚ã†ã­ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Xdebug ä½¿ç”¨æ™‚ã« var_dump ã®å‡ºåŠ›ãŒçœç•¥ã•ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹</title>
      <link>http://1000k.github.io/2013/04/27/suppress-omitting-var-dump-output-of-xdebug/</link>
      <pubDate>Sat, 27 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2013/04/27/suppress-omitting-var-dump-output-of-xdebug/</guid>
      <description>

&lt;p&gt;Xdebug ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã¨ã€var_dump() ã—ãŸå¤‰æ•°ãŒå…¨ã¦è¡¨ç¤ºã•ã‚Œãšã«çœç•¥ã•ã‚Œã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;array(1187) {
  [0] =&amp;gt;
  string(19) &amp;quot;ALICE IN WONDERLAND&amp;quot;
  :
  :
  [127] =&amp;gt;
  string(4) &amp;quot;OLEO&amp;quot;

  (more elements)...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¨ã¦è¡¨ç¤ºã™ã‚‹ã«ã¯ã€&lt;code&gt;/etc/php.ini&lt;/code&gt; ã«ä»¥ä¸‹ã®è¡Œã‚’è¿½åŠ ã™ã‚Œã° OK ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;; è¡¨ç¤ºã™ã‚‹å­è¦ç´ ã®æœ€å¤§æ•° (default: 128)
xdebug.var_display_max_children = -1

; è¡¨ç¤ºã™ã‚‹è¦ç´ ã®æœ€å¤§æ•° (default: 512)
xdebug.var_display_max_data = -1

; è¡¨ç¤ºã™ã‚‹æœ€å¤§ã®éšå±¤ (default: 3)
xdebug.var_display_max_depth = -1
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;å‚è€ƒ:4a6779c3da90459c9dffed130ddd9ac1&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://xdebug.org/docs/all_settings#var_display_max_depth&#34;&gt;Xdebug: Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.kantenna.com/info/2012/02/xdebug_vardump.php&#34;&gt;[PHP]Xdebugã§var_dump()ã®å‡ºåŠ›ãŒçœç•¥ã•ã‚Œã¦å›°ã‚‹å ´åˆã®å¯¾å¿œ | æƒ…å ±å‚™å¿˜éŒ²&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.crossl.net/blog/php_xdebug_vardump_size/&#34;&gt;PHPã§var_dumpæ™‚ã«æ•°ãŒå¤šã„ã¨çœç•¥ã•ã‚Œã¦ã—ã¾ã†ç¾è±¡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>vfsStream ã®ä½¿ã„æ–¹</title>
      <link>http://1000k.github.io/2013/03/27/usage-of-vfsstream/</link>
      <pubDate>Wed, 27 Mar 2013 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2013/03/27/usage-of-vfsstream/</guid>
      <description>

&lt;p&gt;PHPUnit ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã¨ãä¾¿åˆ©ãª &lt;a href=&#34;http://vfs.bovigo.org/&#34;&gt;vfsStream&lt;/a&gt; ã§ã™ãŒã€ç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ãŒã‚ã¾ã‚Šç„¡ã‹ã£ãŸã®ã§æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;vfsstream-ã¨ã¯:1bb7a2da6956cd5c18323dac9c2045f6&#34;&gt;vfsStream ã¨ã¯ï¼Ÿ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹æ™‚ã«ä½¿ã†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚&lt;/li&gt;
&lt;li&gt;ä»®æƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œæˆã—ã€ãã®ä¸­ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã§ãã‚‹ã€‚

&lt;ul&gt;
&lt;li&gt;å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ : &lt;em&gt;file://â€¦&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;ä»®æƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ : &lt;em&gt;vfs://â€¦&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã›ãšã«ãƒ†ã‚¹ãƒˆã§ãã‚‹ã®ã§ã€ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒæ•£ã‚‰ã°ã‚‹å¯èƒ½æ€§ãŒç„¡ãã€å‰å›ã®ãƒ†ã‚¹ãƒˆã®ã‚´ãƒŸã‚’æ„è­˜ã›ãšã«æ¸ˆã‚€ã€‚&lt;/li&gt;
&lt;li&gt;ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¨©é™/ãƒ¦ãƒ¼ã‚¶ãƒ¼/ã‚ªãƒ¼ãƒŠãƒ¼ã‚‚å†ç¾å¯èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•:1bb7a2da6956cd5c18323dac9c2045f6&#34;&gt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;è©³ã—ãã¯ä»¥å‰æ›¸ã„ãŸ &lt;a href=&#34;http://blog.1000k.net/2012/09/04/vfsstream%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B/&#34;&gt;vfsStreamã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ | 1000g&lt;/a&gt; ã‚’å‚ç…§ã€‚&lt;/p&gt;

&lt;h3 id=&#34;php-5-3-ã®å ´åˆ:1bb7a2da6956cd5c18323dac9c2045f6&#34;&gt;PHP &amp;lt; 5.3 ã®å ´åˆ&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;$ pear channel-discover pear.bovigo.org
$ pear install bovigo/vfsStream-beta
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;php-5-3-ã®å ´åˆ-1:1bb7a2da6956cd5c18323dac9c2045f6&#34;&gt;PHP &amp;gt;= 5.3 ã®å ´åˆ&lt;/h3&gt;

&lt;p&gt;composer.json ã«ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;quot;mikey179/vfsStream&amp;quot;: &amp;quot;v1.1.0&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ &lt;a href=&#34;https://packagist.org/packages/mikey179/vfsStream&#34;&gt;mikey179/vfsStream - Packagist&lt;/a&gt; ã‚’å‚ç…§ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰:1bb7a2da6956cd5c18323dac9c2045f6&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰&lt;/h2&gt;

&lt;p&gt;å˜ç´”ã«ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿½è¨˜ã™ã‚‹ã ã‘ã®ãƒ­ã‚¬ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãªãŠã€vfsStream 0.12 ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Logger.php&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Class Logger {
  public static function log($str, $path) {
    return file_put_contents($path, $str);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;LoggerTest.php&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;require_once &#39;Logger.php&#39;;
require_once &#39;vfsStream/vfsStream.php&#39;;

class LoggerTest extends PHPUnit_Framework_Test {
    /**
     * @var vfsStreamDirectory
     */
    private $root;

    protected function setUp() {
        // ä»®æƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‹ã€‚
        $this-&amp;gt;root = vfsStream::setup();     // &amp;quot;vfs://root&amp;quot; ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã‚‹

        // ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¯ vfsStream::url() ã§å–å¾—ã™ã‚‹ã€‚
        var_dump(vfsStream::url(&#39;root&#39;));         // =&amp;gt; vfs://root
        var_dump(is_dir(vfsStream::url(&#39;root&#39;))); // =&amp;gt; true
    }

    /**
     * @covers Logger::log
     */
    public function testLog() {
        $str = &#39;Lorem ipsum&#39;;
        $path = vfsStream::url(&#39;root/foo.txt&#39;);

        $this-&amp;gt;assertGreaterThan(0, Logger::log($str, $path));
        $this-&amp;gt;assertEquals($str, file_get_contents($path));
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;å‚è€ƒ:1bb7a2da6956cd5c18323dac9c2045f6&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://tech.vg.no/2011/03/09/mocking-the-file-system-using-phpunit-and-vfsstream/&#34;&gt;Mocking the file system using PHPUnit and vfsStream â€“ VG Tech&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;vfsStream ã‚’ä½¿ã£ãŸæ§˜ã€…ãªãƒ†ã‚¹ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mikey179/vfsStream/wiki&#34;&gt;Home Â· mikey179/vfsStream Wiki&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;ä½œæˆå…ƒã® GitHub ãƒšãƒ¼ã‚¸ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.phpunit.de/manual/current/ja/test-doubles.html&#34;&gt;ç¬¬10ç«  ãƒ†ã‚¹ãƒˆãƒ€ãƒ–ãƒ«&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;PHPUnit ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã«ã‚ã‚‹è§£èª¬ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>CakePHP 2 ã® Controller ã‚’ãƒ†ã‚¹ãƒˆé§†å‹•ã§ä½œæˆã™ã‚‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</title>
      <link>http://1000k.github.io/2013/02/16/tutorial-to-build-cakephp2-controller-by-tdd/</link>
      <pubDate>Fri, 15 Feb 2013 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2013/02/16/tutorial-to-build-cakephp2-controller-by-tdd/</guid>
      <description>

&lt;p&gt;ç¤¾å†…ã§CakePHP 2 ã‚’ä½¿ã£ãŸ TDD ã‚’å§‹ã‚ãŸãƒãƒ¼ãƒ ãŒã‚ã£ãŸã®ã§ã€èª¬æ˜ã®ãŸã‚æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ApisController::index() ã¨ã„ã†ã€POSTã•ã‚ŒãŸå€¤ã« +1 ã—ã¦è¿”ã™ã ã‘ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ TDD ã§ä½œã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã›ã£ã‹ã CakePHP ãªã®ã§ã€bake ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦é€²ã‚ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;1-ãƒ€ãƒŸãƒ¼ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹:ebcb7468c782ecd2d611762d0def266a&#34;&gt;1. ãƒ€ãƒŸãƒ¼ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹&lt;/h2&gt;

&lt;p&gt;bake ã‚³ãƒãƒ³ãƒ‰ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç´ä»˜ã„ã¦ã„ãªã„ MVC ã‚’ä½œã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã€Apis ãƒ†ãƒ¼ãƒ–ãƒ«ãŒã‚ã‚‹ã‚‚ã®ã¨ã—ã¦è©±ã‚’é€²ã‚ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;XAMPP ã‚’ä½¿ã£ã¦ã„ã‚‹ãªã‚‰ã€ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§ Mojamoja ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã« Apis ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ c:\xampp\mysql\bin\mysql -uroot Mojamoja
mysql&amp;gt; CREATE TABLE `apis` (
  `id` int(11) NOT NULL,
  `created` date,
  `modified` date,
  `name` text
) ENGINE=InnoDB;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;2-å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’bakeã™ã‚‹:ebcb7468c782ecd2d611762d0def266a&#34;&gt;2. å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’bakeã™ã‚‹&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;$ cd c:/mojamoja/cake2/app
$ ./Console/cake.bat bake controller apis
$ ./Console/cake.bat bake view apis```


ãƒ†ã‚¹ãƒˆã—ãŸã„ã®ã¯ Controller ã ã‘ã§ã™ãŒã€å¯¾å¿œã™ã‚‹ View ãŒç„¡ã„ã¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§ä¸€ç·’ã«ä½œã£ã¦ãŠãã¾ã™ã€‚

ã¡ãªã¿ã«é€†é †ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚View ã‚’ä½œã‚‹æ™‚ã«ã¯ã€å¯¾å¿œã™ã‚‹ Controller ãŒå¿…è¦ã«ãªã‚‹ãŸã‚ã§ã™ã€‚

ã“ã®æ™‚ç‚¹ã§ãƒ†ã‚¹ãƒˆã‚’å‹•ã‹ã™ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$ Console\cake.bat test app controller/ApisController&lt;/p&gt;

&lt;h2 id=&#34;welcome-to-cakephp-v2-2-5-console:ebcb7468c782ecd2d611762d0def266a&#34;&gt;Welcome to CakePHP v2.2.5 Console&lt;/h2&gt;

&lt;p&gt;App : app&lt;/p&gt;

&lt;h2 id=&#34;path-c-work-htdocs-cake2-tdd-tutorial-app:ebcb7468c782ecd2d611762d0def266a&#34;&gt;Path: c:\work\htdocs\cake2_tdd_tutorial\app&lt;/h2&gt;

&lt;h2 id=&#34;cakephp-test-shell:ebcb7468c782ecd2d611762d0def266a&#34;&gt;CakePHP Test Shell&lt;/h2&gt;

&lt;p&gt;PHPUnit 3.7.10 by Sebastian Bergmann.&lt;/p&gt;

&lt;p&gt;[41;37mF[0m&lt;/p&gt;

&lt;p&gt;Time: 2 seconds, Memory: 4.25Mb&lt;/p&gt;

&lt;p&gt;There was 1 failure:&lt;/p&gt;

&lt;p&gt;1) Warning
No tests found in class &amp;ldquo;ApisControllerTest&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;C:\work\htdocs\cake2_tdd_tutorial\lib\Cake\TestSuite\CakeTestRunner.php:59
C:\work\htdocs\cake2_tdd_tutorial\lib\Cake\TestSuite\CakeTestSuiteCommand.php:113
C:\work\htdocs\cake2_tdd_tutorial\lib\Cake\Console\Command\TestShell.php:274
C:\work\htdocs\cake2_tdd_tutorial\lib\Cake\Console\Command\TestShell.php:259
C:\work\htdocs\cake2_tdd_tutorial\lib\Cake\Console\Shell.php:395
C:\work\htdocs\cake2_tdd_tutorial\lib\Cake\Console\ShellDispatcher.php:201
C:\work\htdocs\cake2_tdd_tutorial\lib\Cake\Console\ShellDispatcher.php:69&lt;/p&gt;

&lt;p&gt;[37;41m[2KFAILURES!
[0m[37;41m[2KTests: 1, Assertions: 0, Failures: 1.
[0m[2K&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;

ã€Œãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒ1å€‹ã‚‚ã­ãˆã‚ˆã€ã¨æ€’ã‚‰ã‚Œã¦çµ‚äº†ã—ã¾ã™ã€‚

å½“ç„¶ã®çµæœãªã®ã§æ¬¡ã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚

## 3. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œã‚‹

ApisController::index() ã§å®Ÿç¾ã—ãŸã„ä»•æ§˜ã«æ²¿ã£ã¦ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æ›¸ãã¾ã™ã€‚

**app\Test\Case\Controller\ApisControllerTest.php** ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&amp;lt;?php
App::uses(&amp;lsquo;ApisController&amp;rsquo;, &amp;lsquo;Controller&amp;rsquo;);&lt;/p&gt;

&lt;p&gt;class ApisControllerTest extends ControllerTestCase {&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public $fixtures = array();    // ã©ã® Fixture ã‚‚å‚ç…§ã—ãªã„ã‚ˆã†ã«ã™ã‚‹

/**
 * @covers ApiController::index
 */
public function testIndex() {
    // æœŸå¾…ã•ã‚Œã‚‹å€¤
    $expected = array(&#39;uso&#39; =&amp;gt; 801);

    // ApisController::index() ã‚’å©ã„ãŸå‹•ä½œã‚’å†ç¾ã™ã‚‹ã€‚
    $this-&amp;gt;testAction(
        &#39;/apis/index&#39;,
        array(
            &#39;data&#39; =&amp;gt; array(&#39;uso&#39; =&amp;gt; 800),  // uso=800 ã‚’ POST ã™ã‚‹
            &#39;return&#39; =&amp;gt; &#39;vars&#39;              // set ã•ã‚ŒãŸå€¤ã‚’ $this-&amp;gt;vars ã«æ ¼ç´ã™ã‚‹
        )
    );

    // $this-&amp;gt;vars ã«ã¯ã€$this-&amp;gt;testAction() å®Ÿè¡Œæ™‚ã«
    // Controller ã‹ã‚‰ View ã«æ¸¡ã£ãŸå€¤ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚
    $this-&amp;gt;assertEquals($expected, $this-&amp;gt;vars);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;

$this-&amp;gt;testAction($action, $options) ã¯ã€Controller ã‚’å©ã„ãŸæ™‚ã®æŒ™å‹•ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚ä»Šå›ã¯ uso=800 ã¨ã„ã†å€¤ã‚’ POST ã—ã¦ã„ã‚‹çŠ¶æ³ã‚’å†ç¾ã—ã¦ã„ã¾ã™ã€‚

ç¬¬2å¼•æ•°ã® $options ã«ã¯æ§˜ã€…ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã§ãã¾ã™ã€‚ã€Œ&#39;return&#39; =&amp;gt; &#39;vars&#39;ã€ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€testAction() å®Ÿè¡Œæ™‚ã« Controller ã‹ã‚‰ View ã«æ¸¡ã£ãŸå€¤ã‚’ã€$this-&amp;gt;vars ã«æ ¼ç´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®æ™‚ç‚¹ã§ãƒ†ã‚¹ãƒˆã‚’å©ãã¨ã€å½“ç„¶ã¾ã  ApisController::index() ãŒå®Ÿè£…ã§ãã¦ã„ãªã„ã®ã§ã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦çµ‚äº†ã—ã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹çŠ¶æ…‹ã‚’ **Red** ã¨å‘¼ã³ã¾ã™ã€‚

ã“ã®å¾Œå®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãƒ†ã‚¹ãƒˆã‚’æˆåŠŸã™ã‚‹çŠ¶æ…‹ã€ã™ãªã‚ã¡ **Green** ã«ã™ã‚‹ã®ãŒãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º (TDD: Test Driven Development) ã§ã™ã€‚

## 4. ã¨ã«ã‹ãæˆåŠŸã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã

**ã“ã®ä½œæ¥­ã®å‰ã« View/Apis/index.ctp ã®ä¸­èº«ã‚’å…¨ã¦ç©ºã«ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚**

ãã†ã—ãªã„ã¨ã€ãªã«ã‚„ã‚‰å˜ä½“ãƒ†ã‚¹ãƒˆæ™‚ã«ä½™è¨ˆãªæ–‡å­—åˆ—ãŒç´›ã‚Œè¾¼ã‚“ã§å¤±æ•—ã—ã¦ã—ã¾ã„ã¾ã™ã€‚

**app/Controller/ApisController.php** ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&amp;lt;?php
App::uses(&amp;lsquo;AppController&amp;rsquo;, &amp;lsquo;Controller&amp;rsquo;);&lt;/p&gt;

&lt;p&gt;class ApisController extends AppController {&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// ã©ã® Model ã‚‚ä½¿ã‚ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
public $uses = false;

public function index() {
    $data = array(&#39;uso&#39; =&amp;gt; 801);
    $this-&amp;gt;set($data);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;

ã“ã‚Œã§ãƒ†ã‚¹ãƒˆã‚’å†ã³å®Ÿè¡Œã—ã¾ã™ã€‚ä»Šåº¦ã¯ Green ã«ãªã‚Šã¾ã™ã€‚

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$ Console\cake.bat test app controller/ApisController&lt;/p&gt;

&lt;h2 id=&#34;welcome-to-cakephp-v2-2-5-console-1:ebcb7468c782ecd2d611762d0def266a&#34;&gt;Welcome to CakePHP v2.2.5 Console&lt;/h2&gt;

&lt;p&gt;App : app&lt;/p&gt;

&lt;h2 id=&#34;path-c-work-htdocs-cake2-tdd-tutorial-app-1:ebcb7468c782ecd2d611762d0def266a&#34;&gt;Path: c:\work\htdocs\cake2_tdd_tutorial\app&lt;/h2&gt;

&lt;h2 id=&#34;cakephp-test-shell-1:ebcb7468c782ecd2d611762d0def266a&#34;&gt;CakePHP Test Shell&lt;/h2&gt;

&lt;p&gt;PHPUnit 3.7.10 by Sebastian Bergmann.&lt;/p&gt;

&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;Time: 0 seconds, Memory: 6.00Mb&lt;/p&gt;

&lt;p&gt;[30;42m[2KOK (1 test, 1 assertion)
[0m[2K&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;

ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å†…ã§äºˆæ¸¬ã—ã¦ã„ã‚‹å€¤ã‚’ãã®ã¾ã‚“ã¾è¿”ã—ã¦ã„ã‚‹ã®ã§ã€æˆåŠŸã™ã‚‹ã®ã¯å½“ãŸã‚Šå‰ã§ã™ã€‚

ã‚‚ã—ã“ã®æ™‚ç‚¹ã§å¤±æ•—ã—ãŸå ´åˆã¯ã€ã©ã“ã‹åˆ¥ã®éƒ¨åˆ†ã§é–“é•ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®å¾Œã¯ã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆã‚’ç¹°ã‚Šè¿”ã—ã€æœ€çµ‚çš„ã« Green ã«ã—ã¾ã™ã€‚

## 5. ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹

æœ€çµ‚çš„ã«å®Ÿè£…ã—ãŸã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

**app/Controller/ApisController.php**

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&amp;lt;?php
App::uses(&amp;lsquo;AppController&amp;rsquo;, &amp;lsquo;Controller&amp;rsquo;);&lt;/p&gt;

&lt;p&gt;class ApisController extends AppController {&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// ã©ã® Model ã‚‚ä½¿ã‚ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
public $uses = false;

public function index() {
    $data = array();

    foreach ($_POST as $key =&amp;gt; $value) {
        $data[$key] = $value + 1;
    }

    $this-&amp;gt;set($data);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;}
```&lt;/p&gt;

&lt;p&gt;å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ Green ã«ã™ã‚‹éš›ã«ã¯ã€ã€Œã¨ã«ã‹ãæ—©ãæ›¸ãã“ã¨ã€ãŒå¤§åˆ‡ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åˆã‹ã‚‰ç¾ã—ã•ã‚’æ±‚ã‚ã¦ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã®ã¯è¾ã‚ãŸã»ã†ãŒã„ã„ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ã‚ˆã£ã¦ä¿è­·ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€å¾Œã‹ã‚‰ã„ãã‚‰ã§ã‚‚æ´—ç·´ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ã‚ˆã†ã«å¾Œã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’æ´—ç·´ã™ã‚‹ã“ã¨ã‚’ &lt;strong&gt;ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°&lt;/strong&gt; ã¨å‘¼ã³ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚:ebcb7468c782ecd2d611762d0def266a&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;TDD ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæµã‚Œã§ã€Red-&amp;gt;Green ã‚’ãƒªã‚ºãƒŸã‚«ãƒ«ã«è¡Œã„ã¾ã™ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æ›¸ãã€‚&lt;/li&gt;
&lt;li&gt;ãƒ†ã‚¹ãƒˆã‚’èµ°ã‚‰ã›ã€å¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚(Red)&lt;/li&gt;
&lt;li&gt;å¿…ãšãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€‚(Green)&lt;/li&gt;
&lt;li&gt;å®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆã‚’ç¹°ã‚Šè¿”ã—ãªãŒã‚‰ã€æœ€çµ‚çš„ã« Green ã«ãªã‚‹å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ã‚†ã¨ã‚ŠæœŸé–“ã«ã‚³ãƒ¼ãƒ‰ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ãã†ã™ã‚‹ã“ã¨ã§ã‚³ãƒ¼ãƒ‰ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’ä¿ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è£œè¶³:ebcb7468c782ecd2d611762d0def266a&#34;&gt;è£œè¶³&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://book.cakephp.org/2.0/en/development/testing.html#testing-controllers&#34;&gt;å…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«&lt;/a&gt; ã¯ãã“ãã“å­¦ã¹ã¾ã™ãŒã€ãªãœã‹çµæœã‚’ debug() ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã—ã¦ã‚‹ã ã‘ã§ã€ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæœŸå¾…ã•ã‚Œã‚‹å€¤ã¨å®Ÿéš›ã®çµæœã®ç…§åˆï¼‰ã‚’ã‚„ã£ã¦ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ãƒ€ãƒ¡ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;æˆ»ã‚Šå€¤ã¯ã¡ã‚ƒã‚“ã¨ assert ã—ã¾ã—ã‚‡ã†ã€‚ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ã¦æŒ™å‹•ã‚’ç¢ºã‹ã‚ã‚‹ãªã‚‰ expectation ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ã‚ã¨ã€ç¾åœ¨ã®å®Ÿè£…ã ã¨ $_POST ãŒç©ºã®æ™‚ã« Warning ãŒå‡ºã‚‹ã®ã§ã€å®Ÿéš›ã«ã¯ã‚‚ã†å°‘ã—ã‚¨ãƒ³ãƒãƒ³ã‚¹ãŒå¿…è¦ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒã«ãªã‚‹ã‚µã‚¤ãƒˆ:ebcb7468c782ecd2d611762d0def266a&#34;&gt;å‚è€ƒã«ãªã‚‹ã‚µã‚¤ãƒˆ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://api21.cakephp.org&#34;&gt;CakePHP API&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;CakeBook ã¯ CakePHP ã®æ©Ÿèƒ½ã®æ¦‚è¦ã‚’çŸ¥ã‚‹ã®ã«å‘ã„ã¦ã„ã¾ã™ãŒã€ãƒ¡ã‚½ãƒƒãƒ‰ã®ä½¿ã„æ–¹ã‚’èª¿ã¹ã‚‹ã ã‘ãªã‚‰ã“ã£ã¡ã®æ–¹ãŒæ—©ã„ã§ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.phpunit.de/manual/3.6/ja/index.html&#34;&gt;PHPUnit å…¬å¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;CakePHP2 ã® CakeTestCase ã‚¯ãƒ©ã‚¹ã¯ã€PHPUnit ã®ç°¡å˜ãªãƒ©ãƒƒãƒ‘ãƒ¼ãªã®ã§ã€å…¨ã¦ã®æ©Ÿèƒ½ãŒä½¿ãˆã¾ã™ã€‚ã“ã¡ã‚‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚èª­ã‚“ã§ãŠãã¨ã„ã„ã§ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.phpunit.de/manual/3.6/ja/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions&#34;&gt;PHPUnit ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ä¸€è¦§&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;ã»ã¨ã‚“ã©ã®å ´åˆã¯ assertEquals() ã§ã‚«ãƒãƒ¼ã§ãã¾ã™ãŒã€çŸ¥ã£ã¦ãŠãã¨ä¾¿åˆ©ãªã‚‚ã®ã‚‚å¤šã„ã§ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Unixã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’YMDå½¢å¼ã«å¤‰æ›ã™ã‚‹ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼</title>
      <link>http://1000k.github.io/2013/01/11/oneliner-convert-unix-timestamp-to-ymd-format/</link>
      <pubDate>Fri, 11 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2013/01/11/oneliner-convert-unix-timestamp-to-ymd-format/</guid>
      <description>

&lt;p&gt;Unixã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’èª­ã¿ã‚„ã™ã„å½¢å¼ã«å¤‰æ›´ã™ã‚‹ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã‚’ã€ã„ãã¤ã‹ã®è¨€èªã§ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã‚·ã‚§ãƒ«:9514b206b957b6cd4e0a3c8ebb046a97&#34;&gt;ã‚·ã‚§ãƒ«&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;$ date -d @1357872483
2013å¹´  1æœˆ 11æ—¥ é‡‘æ›œæ—¥ 11:48:03 JST
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;php:9514b206b957b6cd4e0a3c8ebb046a97&#34;&gt;PHP&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;$ php -r &#39;echo date(&amp;quot;r&amp;quot;, 1357872483);&#39;
Fri, 11 Jan 2013 11:48:03 +090
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;date()é–¢æ•°ã®ç¬¬1å¼•æ•°ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å¤‰æ›´ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;è©³ã—ãã¯ &lt;a href=&#34;http://php.net/manual/ja/function.date.php&#34;&gt;PHP: date - Manual&lt;/a&gt; ã‚’å‚ç…§ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ruby:9514b206b957b6cd4e0a3c8ebb046a97&#34;&gt;Ruby&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;$ ruby -e &#39;p Time.at(1357872483)&#39;
Fri Jan 11 11:48:03 +0900 2013
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;å‚è€ƒ:9514b206b957b6cd4e0a3c8ebb046a97&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/2371248/how-to-convert-timestamps-to-dates-in-bash&#34;&gt;How to convert timestamps to dates in bash? - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://open-groove.net/linux/change-unix-timestamp/&#34;&gt;UNIX timestampã‚’é€šå¸¸æ™‚åˆ»ã«å¤‰æ›ã—ãŸã„æ™‚ - OpenGroove&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>php5enmodã§PHPæ‹¡å¼µã‚’æœ‰åŠ¹åŒ–ã™ã‚‹æ–¹æ³•</title>
      <link>http://1000k.github.io/2012/10/28/enable-php-extensions-by-php5enmod/</link>
      <pubDate>Sun, 28 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2012/10/28/enable-php-extensions-by-php5enmod/</guid>
      <description>

&lt;p&gt;Ubuntuã«ã¦ã€peclã§MongoDBã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã•ã‚å‹•ã‹ãã†ã¨æ€ã£ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦å‹•ãã¾ã›ã‚“ã§ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[Sun Oct 28 19:39:08 2012] [error] [client *.*.*.*] PHP Fatal error:  Class &#39;Mongo&#39; not found in /var/www/html/*.php on line 38
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;php.iniã‚‚ç·¨é›†ã—ãŸã—ã€Apacheå†èµ·å‹•ã‚‚ã—ãŸã®ã«ãªãœï¼Ÿã¨è»½ãã¤ã¾ã¥ãã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‘ã£ãã‚‡ãåŸå› ã¯Ubuntuã®ä½œæ³•ã‚’åˆ†ã‹ã£ã¦ã„ãªã‹ã£ãŸãŒç‚ºã®ã‚¨ãƒ©ãƒ¼ã§ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;åŸå› :d103d0ed9885bf3d8051c00805d3aeed&#34;&gt;åŸå› &lt;/h2&gt;

&lt;p&gt;Ubuntuã§ã¯Apache2åŒæ§˜ã€PHPã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚‚éšå±¤åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;çŸ¥ã‚‰ãªã„ã¨ã¯ã¾ã‚‹ã®ãŒã€WEBç”¨ã®è¨­å®šã¨CLIç”¨ã®è¨­å®šãŒç•°ãªã‚‹ã“ã¨ã§ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;WEBç”¨: /etc/php5/apache2/php.ini&lt;/li&gt;
&lt;li&gt;CLIç”¨: /etc/php5/cli/php.ini&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã‚‚ã—mongo.soã‚’ä¸¡æ–¹ã§ä½¿ã„ãŸã‘ã‚Œã°ã€ä¸¡æ–¹ã®è¨­å®šã‚’ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ç§ã¯CLIç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã—ã‹è¨­å®šã—ã¦ã„ãªã‹ã£ãŸã®ã§ã€WEBã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã« Class not found ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãã‚Œã¯é¢å€’ã ã€ã¨ã„ã†å ´åˆã®ç‚ºã«ã¡ã‚ƒã‚“ã¨æŠœã‘é“ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;php5enmod&lt;/strong&gt;ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦modã‚’ä¸¡æ–¹ã«æœ‰åŠ¹åŒ–ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;â€»php5enmod ã¯ &lt;strong&gt;PHP &amp;gt;= 5.4.0&lt;/strong&gt; ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå ´åˆã®ã¿æœ‰åŠ¹ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ‰‹é †:d103d0ed9885bf3d8051c00805d3aeed&#34;&gt;æ‰‹é †&lt;/h2&gt;

&lt;p&gt;mongo.soã‚’WEB/CLIä¸¡æ–¹ã§æœ‰åŠ¹ã«ã—ãŸã„å ´åˆã¯ã€ä¸‹è¨˜ã®æ‰‹é †ã‚’è¸ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;/etc/php5/mods-available/mongo.ini&lt;/strong&gt;ã‚’ä½œæˆã™ã‚‹ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;extension=mongo.so
&lt;/code&gt;&lt;/pre&gt;

&lt;ol&gt;
&lt;li&gt;modã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;$ sudo php5enmod mongo
&lt;/code&gt;&lt;/pre&gt;

&lt;ol&gt;
&lt;li&gt;Apache2ã‚’å†èµ·å‹•ã™ã‚‹ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;$ sudo service apache2 restart
&lt;/code&gt;&lt;/pre&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;WEB/CLIã§ä¸¡æ–¹ã§è¨­å®šãŒåæ˜ ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;CLIã‹ã‚‰ã¯ã€Œphp -i | grep mongoã€ã‚’å©ãã€WEBã‹ã‚‰ã¯ phpinfo() ã‚’è¦‹ã¦ã€ãã‚Œãã‚Œã€Œmongoã€ã¨ã„ã†é …ç›®ãŒã‚ã‚Œã°OKã§ã™ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ã†ã¾ãã„ã‹ãªã„å ´åˆã€ãƒ­ã‚°ï¼ˆ/var/log/apache2/error.logï¼‰ã‚’è¦‹ã¦ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ:d103d0ed9885bf3d8051c00805d3aeed&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.launchpad.net/ubuntu/+source/php-apc/+bug/994882&#34;&gt;Bug #994882 â€œphp5{en/dis}mod not available in php 5.3.10â€ : Bugs : â€œphp-apcâ€ package : Ubuntu&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ—¥é ƒCentOSã°ã‹ã‚Šè§¦ã£ã¦ã„ã‚‹ã¨Ubuntuãƒ«ãƒ¼ãƒ«ã«ã¤ã¾ã¥ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ…£ã‚Œã‚Œã°Ubuntuã®æ•´ç†æ–¹æ³•ãŒä½¿ã„ã‚„ã™ã„ã¨æ€ã†ã®ã§ã™ãŒã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä¾å­˜æ€§æ³¨å…¥ã®è§£èª¬ã¨ã‚„ã‚Šæ–¹</title>
      <link>http://1000k.github.io/2012/10/24/lecture-of-dependency-injection/</link>
      <pubDate>Wed, 24 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2012/10/24/lecture-of-dependency-injection/</guid>
      <description>

&lt;p&gt;&lt;strong&gt;ä¾å­˜æ€§æ³¨å…¥ (Dependency Injection)&lt;/strong&gt; ã¯ã€ã‚¯ãƒ©ã‚¹ã‚’å˜ä½“ãƒ†ã‚¹ãƒˆå¯èƒ½ã«ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚ŒãŒæ„è­˜ã•ã‚Œã¦ã„ãªã„ãŒæ•…ã«å˜ä½“ãƒ†ã‚¹ãƒˆãŒå…¨ãã§ããªã„ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆãè¦‹ã‹ã‘ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å˜ä½“ãƒ†ã‚¹ãƒˆã®éš›ã«ã¯å¿…ãšå¿…è¦ã«ãªã‚‹çŸ¥è­˜ãªã®ã§ã€è§£èª¬ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ &lt;a href=&#34;http://www.phpunit.de/manual/3.8/ja/index.html&#34;&gt;PHPUnit&lt;/a&gt; ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å˜ä½“ãƒ†ã‚¹ãƒˆãŒã§ããªã„ã‚±ãƒ¼ã‚¹:d011759973daaf90efe485c60339885a&#34;&gt;å˜ä½“ãƒ†ã‚¹ãƒˆãŒã§ããªã„ã‚±ãƒ¼ã‚¹&lt;/h2&gt;

&lt;p&gt;ä¾‹ãˆã°ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ Foo::play() ã¯å˜ä½“ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒæ›¸ã‘ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class Foo {
    public function play() {
        $bar = new Bar();

        if ($bar-&amp;gt;getSomething() === 1) {
            return true;
        }

        return false;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;play() å†…ã§å¤–éƒ¨ã‚¯ãƒ©ã‚¹ Bar ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Š Foo::play() ãƒ¡ã‚½ãƒƒãƒ‰ã¯ Bar ã‚¯ãƒ©ã‚¹ã«&lt;strong&gt;ä¾å­˜&lt;/strong&gt;ã—ã¦ãŠã‚Šã€å˜ä½“ãƒ†ã‚¹ãƒˆãŒã§ãã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ã¾ã¾ç„¡ç†çŸ¢ç†ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æ›¸ãã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class FooTest {
    /**
     * @covers Foo::play
     */
    public function testPlay() {
        $foo = new Foo;
        $this-&amp;gt;assertTrue($this-&amp;gt;foo-&amp;gt;play());
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½•ãŒå•é¡Œã‹ã‚ã‹ã‚‹ã§ã—ã‚‡ã†ã‹ï¼ŸFoo ã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆçµæœã¯ Bar ã‚¯ãƒ©ã‚¹ã«ä¾å­˜ã—ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€Foo ã¯ä½•ã‚‚å¤‰æ›´ã—ã¦ã„ãªãã¦ã‚‚ã€Bar ã‚’å¤‰æ›´ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ Foo ã®å˜ä½“ãƒ†ã‚¹ãƒˆãŒå£Šã‚Œã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã§ã¯çµåˆãƒ†ã‚¹ãƒˆã§ã‚ã‚Šã€å˜ä½“ãƒ†ã‚¹ãƒˆã«ãªã£ã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ãã®ãŸã‚ã€é€šå¸¸ã¯ Bar ã‚¯ãƒ©ã‚¹ã‚’&lt;strong&gt;ãƒ¢ãƒƒã‚¯åŒ–&lt;/strong&gt;ã—ã€Bar ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã‚’ç„¡è¦–ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãƒ¢ãƒƒã‚¯åŒ–ã¨ã¯:d011759973daaf90efe485c60339885a&#34;&gt;ãƒ¢ãƒƒã‚¯åŒ–ã¨ã¯ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;ãƒ¢ãƒƒã‚¯åŒ–ã¨ã¯ã€ã‚¯ãƒ©ã‚¹ã®æŒ™å‹•ã‚’ç½®ãæ›ãˆã‚‹ã“ã¨ã§ã™ã€‚ä¾‹ãˆã°ç‰¹å®šã®ãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã‚’å¥½ããªå€¤ã«æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã®ã‚±ãƒ¼ã‚¹ã§ã¯ã€Bar::getSomething() ãŒå¸¸ã« 1 ã‚’è¿”ã™ã‚ˆã†ã«ã™ã‚Œã°ã€ã€Œreturn trueã€ã®è¡ŒãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã—ã€1 ä»¥å¤–ã‚’è¿”ã™ã‚ˆã†ã«ã™ã‚Œã°ã€Œreturn falseã€ã®è¡ŒãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã—ã‹ã—å…ˆè¿°ã®ã‚³ãƒ¼ãƒ‰ã®ã¾ã¾ã§ã¯ã€ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ Bar ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¦ã„ã‚‹ãŸã‚ã€ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥ã™ã‚‹æ‰‹æ®µãŒã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ã ãƒ”ãƒ³ã¨æ¥ãªã„æ–¹ã‚‚ã€ã“ã®å…ˆã®å…·ä½“ä¾‹ã‚’è¦‹ã‚Œã°ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒæ´ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å˜ä½“ãƒ†ã‚¹ãƒˆå¯èƒ½ã«ã™ã‚‹:d011759973daaf90efe485c60339885a&#34;&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å˜ä½“ãƒ†ã‚¹ãƒˆå¯èƒ½ã«ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ã‚‚ã—ãƒ¡ã‚½ãƒƒãƒ‰ãŒä¸‹è¨˜ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚Œã°ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public function play(Bar $bar) {     // Bar ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å—ã‘å–ã‚‹ã‚ˆã†ã«ã—ãŸã€‚
        if ($bar-&amp;gt;getSomething() === 1) {
            return true;
        }

        return false;
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ Bar ã‚¯ãƒ©ã‚¹ã‚’ new ã™ã‚‹ã®ã§ãªãã€Bar ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å¼•æ•°ã«å—ã‘å–ã£ã¦åˆ©ç”¨ã™ã‚‹ã ã‘ã«ã—ã¾ã—ãŸã€‚ã“ã‚Œãªã‚‰ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public function testPlay() {
        $foo = new Foo;

        $bar = $this-&amp;gt;getMock(&#39;Bar&#39;);         // Bar ã‚¯ãƒ©ã‚¹ã®ãƒ¢ãƒƒã‚¯ã‚’ä½œæˆã™ã‚‹ã€‚
        $bar-&amp;gt;expects($this-&amp;gt;any())
            -&amp;gt;method(&#39;getSomething&#39;)
            -&amp;gt;will($this-&amp;gt;returnValue(1));    // Bar::getSomething() ã®æˆ»ã‚Šå€¤ãŒ 1 ã«ãªã‚‹ã‚ˆã†è¨­å®šã™ã‚‹ã€‚

        $this-&amp;gt;assertTrue($foo-&amp;gt;play($bar));  // Foo::play() ã«æ³¨å…¥
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Foo::play() ãƒ¡ã‚½ãƒƒãƒ‰ã¯ Bar ã‚¯ãƒ©ã‚¹ã¨ã®ä¾å­˜ãŒè§£æ¶ˆã•ã‚Œã€å˜ä½“ãƒ†ã‚¹ãƒˆãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã§ã‚‚ã† Bar ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã‚’å¤‰æ›´ã—ã¦ã‚‚ Foo ã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆãŒå£Šã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚ŒãŒ&lt;strong&gt;ä¾å­˜æ€§æ³¨å…¥&lt;/strong&gt;ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹æ‰‹æ³•ã§ã€&lt;strong&gt;ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ»ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³&lt;/strong&gt; (Interface Injection) ã¨å‘¼ã°ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ï¼ˆâ€»å³å¯†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ»ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã¾ãšã‚¯ãƒ©ã‚¹ã® interface ã‚’ä½œæˆã—ã€ãã‚Œã‚’å§”è­²ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¸Šè¨˜ã®ä¾‹ã§ã¯ç°¡ç•¥åŒ–ã®ãŸã‚ interface ã¯ä½œæˆã—ã¦ã„ã¾ã›ã‚“ã€‚ï¼‰&lt;/p&gt;

&lt;h2 id=&#34;ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼-ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³:d011759973daaf90efe485c60339885a&#34;&gt;ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãƒ»ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³&lt;/h2&gt;

&lt;p&gt;ä¾å­˜æ€§æ³¨å…¥ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚„ã‚Šæ–¹ã§ã‚‚å®Ÿç¾ãŒå¯èƒ½ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class Foo {
    /** @var Bar */
    protected $bar;

    public function __constructor(Bar $bar = null) {
        // ãƒ¡ãƒ³ãƒå¤‰æ•°ã¨ã—ã¦ Bar ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¦ãŠãã€‚
        $this-&amp;gt;bar = $bar ? $bar : new Bar;
    }

    public function play() {
        // ãƒ¡ãƒ³ãƒå¤‰æ•°ã® Bar ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã€‚
        if ($this-&amp;gt;bar-&amp;gt;getSomething() === 1) {
            return true;
        }

        return false;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã‚±ãƒ¼ã‚¹ã§ã¯ã€Foo ã‚¯ãƒ©ã‚¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã« Bar ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯&lt;strong&gt;ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãƒ»ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³&lt;/strong&gt; (Constructor Injection) ã¨å‘¼ã°ã‚Œã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®å ´åˆã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public function testPlay() {
        // Bar ã‚¯ãƒ©ã‚¹ã®ãƒ¢ãƒƒã‚¯ã‚’ä½œæˆã™ã‚‹ã€‚
        $bar = $this-&amp;gt;getMock(&#39;Bar&#39;);
        $bar-&amp;gt;expects($this-&amp;gt;any())
            -&amp;gt;method(&#39;getSomething&#39;)
            -&amp;gt;will($this-&amp;gt;returnValue(1));

        $foo = new Foo($bar);   // Constructor Injection ã§ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥ã™ã‚‹ã€‚

        $this-&amp;gt;assertTrue($foo-&amp;gt;play($bar));
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;â€»ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å†…ã®3é …æ¼”ç®—å­ã«ã¤ã„ã¦è£œè¶³ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public function __constructor(Bar $bar = null) {
        $this-&amp;gt;bar = $bar ? $bar : new Bar;
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å¼•æ•°ã« $bar ãŒæ¸¡ã•ã‚Œãªã‹ã£ãŸæ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® Bar ã‚¯ãƒ©ã‚¹ã‚’ new ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ†ã‚¹ãƒˆã®æ™‚ã¯ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥ã—ã¦ä½¿ã†ã‚ˆã†ã«ã—ã€æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã§ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½•ã‚‚æŒ‡å®šã—ãªã„ã“ã¨ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® Foo ã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã‚»ãƒƒã‚¿ãƒ¼-ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³:d011759973daaf90efe485c60339885a&#34;&gt;ã‚»ãƒƒã‚¿ãƒ¼ãƒ»ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³&lt;/h2&gt;

&lt;p&gt;åˆ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã—ã¦ã€ã‚¯ãƒ©ã‚¹ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ³¨å…¥ã™ã‚‹ãŸã‚ã‚»ãƒƒã‚¿ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨æ„ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class Foo {
    /** @var Bar */
    protected $bar;

    /**
     * ã‚»ãƒƒã‚¿ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰
     *
     * @param Bar $bar
     */
    public function setBar(Bar $bar) {
        $this-&amp;gt;bar = $bar;
    }

    public function play() {
        if ($this-&amp;gt;bar-&amp;gt;getSomething() === 1) {
            return true;
        }

        return false;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã§ Bar ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ³¨å…¥ã™ã‚‹ã®ã§ãªãã€setBar() ãƒ¡ã‚½ãƒƒãƒ‰ã§ Bar ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ³¨å…¥ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®å ´åˆã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public function testPlay() {
        // Bar ã‚¯ãƒ©ã‚¹ã®ãƒ¢ãƒƒã‚¯ã‚’ä½œæˆã™ã‚‹ã€‚
        $bar = $this-&amp;gt;getMock(&#39;Bar&#39;);
        $bar-&amp;gt;expects($this-&amp;gt;any())
            -&amp;gt;method(&#39;getSomething&#39;)
            -&amp;gt;will($this-&amp;gt;returnValue(1));

        $foo = new Foo;
        $foo-&amp;gt;setBar($bar);     // ã‚»ãƒƒã‚¿ãƒ¼çµŒç”±ã§ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥ã™ã‚‹ã€‚

        $this-&amp;gt;assertTrue($foo-&amp;gt;play($bar));
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚ŒãŒ&lt;strong&gt;ã‚»ãƒƒã‚¿ãƒ¼ãƒ»ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³&lt;/strong&gt; (Setter Injection) ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚:d011759973daaf90efe485c60339885a&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;å˜ä½“ãƒ†ã‚¹ãƒˆã—ãŸã‘ã‚Œã°ã€ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å¤–éƒ¨ã‚¯ãƒ©ã‚¹ã‚’ new ã—ã¦ã¯ã„ã‘ãªã„ã€‚&lt;/li&gt;
&lt;li&gt;ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹æ‰‹æ³•ã‚’æ¡ã‚‹ã€‚

&lt;ul&gt;
&lt;li&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã«ä½¿ã„ãŸã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚ (Interface Injection)&lt;/li&gt;
&lt;li&gt;ä½¿ã†äºˆå®šã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«æ¸¡ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚(Constructor Injection)&lt;/li&gt;
&lt;li&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ setter ãƒ¡ã‚½ãƒƒãƒ‰ã§æ¸¡ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚(Setter Injection)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;è£œè¶³1-runkitã§å¼·å¼•ã«ãƒ¡ã‚½ãƒƒãƒ‰ã®æŒ™å‹•ã‚’å¤‰ãˆã‚‹æ–¹æ³•:d011759973daaf90efe485c60339885a&#34;&gt;è£œè¶³1: runkitã§å¼·å¼•ã«ãƒ¡ã‚½ãƒƒãƒ‰ã®æŒ™å‹•ã‚’å¤‰ãˆã‚‹æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;PHPã«ãŠã„ã¦ã¯ &lt;a href=&#34;http://php.net/manual/ja/book.runkit.php&#34;&gt;runkit&lt;/a&gt; ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ¢ãƒƒã‚¯åŒ–ã‚’ã—ãªãã¦ã‚‚ãƒ¡ã‚½ãƒƒãƒ‰ã®æŒ™å‹•ã‚’å¼·å¼•ã«å¤‰ãˆã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ãŸã ã—ç ´å£Šçš„ãªæ‰‹æ®µã§ã‚ã‚Šã€ã“ã‚ŒãŒå¿…è¦ãªæ™‚ç‚¹ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘çš„ãªè¨­è¨ˆãŒã§ãã¦ã„ãªã„ç–‘ã„ãŒéå¸¸ã«å¼·ã„ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã§ãã‚‹ã ã‘ Constructor Injection ç­‰ã®æ–¹æ³•ã‚’ç”¨ã„ã€ãƒ†ã‚¹ãƒˆå¯èƒ½ã«ãªã‚‹ã‚ˆã†ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ã—ã¾ã—ã‚‡ã†ã€‚ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä¸­ã¯ã‚³ãƒ¼ãƒ‰ãŒé†œããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€æœ€çµ‚çš„ã«è¨­è¨ˆãŒæ”¹å–„ã§ãã‚‹ãªã‚‰ã°çµæœOKã§ã™ã€‚ç¾ã—ã•ã‚ˆã‚Šã‚‚å®‰å…¨æ€§ãŒä½•ã‚ˆã‚Šé‡è¦ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è£œè¶³2-constructor-injection-vs-setter-injection:d011759973daaf90efe485c60339885a&#34;&gt;è£œè¶³2: Constructor Injection vs Setter Injection&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://blog.1000k.net/2012/10/23/%e6%8a%84%e8%a8%b3-constructor-injection-vs-setter-injection/&#34;&gt;æŠ„è¨³: Constructor Injection vs. Setter Injection | 1000g&lt;/a&gt; ã«ã¦ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãƒ»ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã¨ã‚»ãƒƒã‚¿ãƒ¼ãƒ»ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ã©ã¡ã‚‰ãŒè‰¯ã„ã‹ã‚’è€ƒå¯Ÿã—ã¦ã„ã¾ã™ã€‚çµè«–ã¨ã—ã¦ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãƒ»ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãŒãƒ™ã‚¿ãƒ¼ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ:d011759973daaf90efe485c60339885a&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://ja.wikipedia.org/wiki/%E4%BE%9D%E5%AD%98%E6%80%A7%E3%81%AE%E6%B3%A8%E5%85%A5&#34;&gt;ä¾å­˜æ€§ã®æ³¨å…¥ - Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://d.hatena.ne.jp/m-hiyama/20060926/1159253903&#34;&gt;DIï¼ˆä¾å­˜æ€§æ³¨å…¥ï¼‰ã‚’ç™½ç´™ã‹ã‚‰èª¬æ˜ã—ã¦ã¿ã‚‹ - æªœå±±æ­£å¹¸ã®ã‚­ãƒã‚¤ãƒ©é£¼è‚²è¨˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://martinfowler.com/articles/injection.html&#34;&gt;Inversion of Control Containers and the Dependency Injection pattern&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ç•Œã®å¤§å¾¡æ‰€ã€Martin Fowleræ°ã®è€ƒå¯Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.techscore.com/tech/Java/Others/Spring/1-3/&#34;&gt;Dependency Injection ã®ã‚¿ã‚¤ãƒ— | TECHSCORE(ãƒ†ãƒƒã‚¯ã‚¹ã‚³ã‚¢)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.phpunit.de/manual/3.7/ja/test-doubles.html#test-doubles.mock-objects&#34;&gt;ç¬¬10ç«  ãƒ†ã‚¹ãƒˆãƒ€ãƒ–ãƒ«&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;PHPUnit å…¬å¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã«ã‚ˆã‚‹ãƒ¢ãƒƒã‚¯ã®ä½¿ã„æ–¹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>header()é–¢æ•°ã‚’ä½¿ã£ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’PHPUnitã§ãƒ†ã‚¹ãƒˆã™ã‚‹æ–¹æ³•</title>
      <link>http://1000k.github.io/2012/10/20/how-to-test-method-using-header-function-in-phpunit/</link>
      <pubDate>Sat, 20 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2012/10/20/how-to-test-method-using-header-function-in-phpunit/</guid>
      <description>

&lt;p&gt;PHPUnit ã¯ãƒ†ã‚¹ãƒˆä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¸€æ¨™æº–å‡ºåŠ›ã™ã‚‹ãŸã‚ã€header() é–¢æ•°ã‚’ç”¨ã„ãŸãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ†ã‚¹ãƒˆãŒã§ãã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;header() é–¢æ•°ã¯ãã®å®Ÿè¡Œå‰ã®ä½•ã‚‰ã‹ã®æ¨™æº–å‡ºåŠ›ãŒã•ã‚Œã¦ã„ã‚‹ã¨ã€ŒCannot modify header informationã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã‚’åã„ã¦ã—ã¾ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¨å¯¾ç­–ã‚’ãƒ¡ãƒ¢ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç¾è±¡:caf62378c2e0b948501f395df88dace1&#34;&gt;ç¾è±¡&lt;/h2&gt;

&lt;p&gt;ãŸã¨ãˆã°ä¸‹è¨˜ã®ã‚ˆã†ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ã‚¨ãƒ©ãƒ¼ã§æ­¢ã¾ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class Api {
    public function output($data, $response_code = 200) {
        http_response_code($response_code);
        header(&#39;Content-Type: application/json&#39;); // PHPUnitã®æ¨™æº–å‡ºåŠ›ã®ã›ã„ã§ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸­ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
        $output = json_encode($data);

        echo $output;
        return $output;
    }
}

class ApiTest extends \PHPUnit_Framework_TestCase {
    // ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
    /**
     * @covers Api::output
     * @dataProvider forTestOutput
     */
    public function testOutput($data, $response_code) {
        ob_start();
        $actual = $this-&amp;gt;object-&amp;gt;output($data, $response_code);
        $output = ob_get_contents();
        $expected = json_encode($data);

        $this-&amp;gt;assertEquals($expected, $actual);
        $this-&amp;gt;assertEquals($output, $actual);
        $this-&amp;gt;assertEquals(http_response_code(), $response_code);
        ob_clean();
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã‚’åãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Cannot modify header information - headers already sent by (output started at D:\xampp\php\pear\PHPUnit\Util\Printer.php:172)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;å¯¾ç­–:caf62378c2e0b948501f395df88dace1&#34;&gt;å¯¾ç­–&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;@runInSeparateProcess&lt;/strong&gt; ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã ã‘ã‚’åˆ¥ãƒ—ãƒ­ã‚»ã‚¹ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¤ã¾ã‚Šã€æ¨™æº–å‡ºåŠ›ãŒçœŸã£ã•ã‚‰ãªçŠ¶æ…‹ã§ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã§ãã‚‹ã®ã§ã€header() é–¢æ•°ãŒã‚¨ãƒ©ãƒ¼ã‚’åãã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/**
     * @covers Api::output
     * @dataProvider forTestOutput
     * @runInSeparateProcess
     */
    public function testOutput($data, $response_code) {
        // ...
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;PHPUnit 3.7.8 by Sebastian Bergmann.

.

Time: 3 seconds, Memory: 2.75Mb

OK (1 test, 3 assertions)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;header() é–¢æ•°ã‚’ä½¿ã£ãŸãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹éš›ã«ã¯è¦šãˆã¦ãŠããŸã„ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ:caf62378c2e0b948501f395df88dace1&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.phpunit.de/manual/3.7/ja/appendixes.annotations.html#appendixes.annotations.runInSeparateProcess&#34;&gt;ä»˜éŒ²B ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.php.net/manual/ja/function.header.php&#34;&gt;PHP: header - Manual&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/9745080/test-php-headers-with-phpunit&#34;&gt;unit testing - Test PHP headers with PHPunit - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>PHPUnitã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãŸã‚‰å‹•ä½œã—ãªããªã£ãŸ</title>
      <link>http://1000k.github.io/2012/10/19/phpunit-does-not-run-after-upgrade/</link>
      <pubDate>Fri, 19 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2012/10/19/phpunit-does-not-run-after-upgrade/</guid>
      <description>

&lt;p&gt;PHPUnit ã‚’ä½•ã¨ãªãã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãŸã‚‰å‹•ã‹ãªããªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã¯ pear upgrade ã§ PHPUnit ã‚’ 3.6.11 ã‹ã‚‰ 3.6.12 ã« æ›´æ–°ã—ãŸå¾Œã€phpunit ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã¨ä¸‹è¨˜ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# phpunit

Parse error: syntax error, unexpected T_FUNCTION, expecting &#39;)&#39; in /usr/local/lib/php/PHP/Timer/Autoload.php on line 47

Call Stack:
    0.0018      50328   1. {main}() /usr/local/bin/phpunit:0
    0.0030      87992   2. require(&#39;/usr/local/lib/php/PHPUnit/Autoload.php&#39;) /usr/local/bin/phpunit:43
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¿®å¾©ã«å°ä¸€æ™‚é–“ã‹ã‹ã£ãŸã®ã§ã€ç›´ã—æ–¹ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åŸå› :50be0dd242e143a3defa66c95863f49e&#34;&gt;åŸå› &lt;/h2&gt;

&lt;p&gt;PHPUnit ã¯ PHP &amp;gt;= 5.3 ã§ã®åˆ©ç”¨ã‚’å¼·ãæ¨å¥¨ã—ã¦ãŠã‚Šã€PHP &amp;lt;= 5.2 ã®ã¾ã¾ã ã¨å‹•ã‹ãªã„æ©Ÿèƒ½ã‚’ç››ã‚Šè¾¼ã‚“ã§ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€æœ¬ä½“ä»¥å¤–ã«ã‚‚å¤šæ•°ã®ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚Šã€ã©ã‚Œã‹ãŒæ€¥ã« &amp;gt;= 5.3 ã®æ©Ÿèƒ½ã‚’ä½¿ã„å§‹ã‚ã¦ã‚‚å‹•ã‹ãªããªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ç§ã®ç’°å¢ƒã¯ PHP 5.2.x ã ã£ãŸãŸã‚ã€ä»Šå›ã®ã‚¨ãƒ©ãƒ¼ã«å‡ºãã‚ã—ã¾ã—ãŸã€‚åŸå› ã¯ phpunit/PHP_Timer ãŒãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã—ãŸã›ã„ã§ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/sebastianbergmann/php-timer/blob/1.0.4/PHP/Timer/Autoload.php&#34;&gt;phpunit/PHP_Timer-1.0.4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/sebastianbergmann/php-timer/blob/1.0.3/PHP/Timer/Autoload.php&#34;&gt;phpunit/PHP_Timer-1.0.3&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸Šè¨˜ã®ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãŠã‚ã‹ã‚Šã®ã‚ˆã†ã«ã€1.0.4 ã‹ã‚‰åŒ¿åé–¢æ•°ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ PHP &amp;gt;= 5.3 ã§ã—ã‹å‹•ãã¾ã›ã‚“ã€‚5.2ç³»ã§ã¯ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å¯¾ç­–:50be0dd242e143a3defa66c95863f49e&#34;&gt;å¯¾ç­–&lt;/h2&gt;

&lt;p&gt;PHP_Timer ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§ä¿®æ­£å¯èƒ½ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®æ™‚ã¯ä¾å­˜é–¢ä¿‚ã‚’ç„¡è¦–ã—ã¦å‰Šé™¤ã™ã‚‹ãŸã‚ã€Œ-nã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# pear uninstall -n phpunit/PHP_Timer
&amp;quot;phpunit/PHP_Timer&amp;quot; can be optionally used by installed package pear/PHP_CodeSniffer
warning: phpunit/PHP_Timer (version &amp;gt;= 1.0.2) is required by installed package &amp;quot;phpunit/phpcpd&amp;quot;
warning: phpunit/PHP_Timer (version &amp;gt;= 1.0.1, version &amp;lt;= 1.0.3) is required by installed package &amp;quot;phpunit/PHPUnit&amp;quot;
warning: phpunit/PHP_Timer should not be uninstalled, other installed packages depend on this package
uninstall ok: channel://pear.phpunit.de/PHP_Timer-1.0.4

#  pear install phpunit/PHP_Timer-1.0.3
downloading PHP_Timer-1.0.3.tgz ...
Starting to download PHP_Timer-1.0.3.tgz (3,743 bytes)
....done: 3,743 bytes
install ok: channel://pear.phpunit.de/PHP_Timer-1.0.3
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»¥ä¸Šã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;PHP 5.2ç³»ã®äººã¯ã†ã‹ã¤ã« ã€Œpear upgrade phpunit/phpunitã€ãªã‚“ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å©ã‹ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ã‚‚ã—ãã¯ã•ã£ã•ã¨5.4ç³»ã«ç§»è¡Œã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ:50be0dd242e143a3defa66c95863f49e&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://dustyreagan.com/downgrade-phpunit-3-6-to-3-5-15/&#34;&gt;How to Downgrade PHPUnit 3.6 to 3.5.15 | Dusty Reagan&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;pear ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰æ–¹æ³•ã¯ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>vfsStreamã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</title>
      <link>http://1000k.github.io/2012/09/04/installing-vfsstream/</link>
      <pubDate>Tue, 04 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>http://1000k.github.io/2012/09/04/installing-vfsstream/</guid>
      <description>

&lt;p&gt;PHPUnit ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã«å‡ºã¦ãã‚‹ä»®æƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã® vfsStream ã§ã™ãŒã€&lt;a href=&#34;http://www.phpunit.de/manual/3.6/ja/test-doubles.html#test-doubles.mocking-the-filesystem&#34;&gt;å…¬å¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«&lt;/a&gt;ã«è¼‰ã£ã¦ã„ã‚‹æ–¹æ³•ã§ã¯æ—¢ã«PEARãƒãƒ£ãƒ³ãƒãƒ«ãŒæ¶ˆãˆã¦ã„ã‚‹ãŸã‚ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã«æ­£ã—ã„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;php-5-2-ã®å ´åˆ:95f81ffdb8fe1ed455aec73bf72b588a&#34;&gt;PHP &amp;lt; 5.2 ã®å ´åˆ&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ vfsStream &amp;lt; 1.0 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ pear channel-discover pear.bovigo.org
$ pear install bovigo/vfsStream-beta

downloading vfsStream-0.12.0.tgz ...
Starting to download vfsStream-0.12.0.tgz (459,376 bytes)
.........done: 459,376 bytes
install ok: channel://pear.bovigo.org/vfsStream-0.12.0
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;php-5-3-ã®å ´åˆ:95f81ffdb8fe1ed455aec73bf72b588a&#34;&gt;PHP &amp;gt;= 5.3 ã®å ´åˆ&lt;/h2&gt;

&lt;p&gt;vfsStream &amp;gt;= 1.0 ã‚’ &lt;a href=&#34;http://getcomposer.org/&#34;&gt;Composer&lt;/a&gt; ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;quot;mikey179/vfsStream&amp;quot;: &amp;quot;v1.1.0&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ &lt;a href=&#34;https://packagist.org/packages/mikey179/vfsStream&#34;&gt;mikey179/vfsStream - Packagist&lt;/a&gt; ã‚’å‚ç…§ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ:95f81ffdb8fe1ed455aec73bf72b588a&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mikey179/vfsStream/wiki/Install&#34;&gt;Download and install vfsStream Â· mikey179/vfsStream Wiki&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>